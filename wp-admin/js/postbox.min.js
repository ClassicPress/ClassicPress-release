document.addEventListener("DOMContentLoaded",(function(){"use strict";var e=document.querySelectorAll(".postbox:not( .hide-if-js ) .handle-order-higher"),t=document.querySelectorAll(".postbox:not( .hide-if-js ) .handle-order-lower"),n=[...e,...t],o=wp.i18n.__,r=document.querySelectorAll(".postbox"),s=document.querySelectorAll(".meta-box-sortables"),i=document.querySelector(".postbox a.dismiss"),l=document.querySelectorAll(".hide-postbox-tog"),a=document.querySelectorAll('.columns-prefs input[type="radio"]'),c=document.querySelector('label.columns-prefs-1 input[type="radio"]'),d=o(null==r?"Add boxes from the Screen Options menu":"Drag boxes here");function u(){s.forEach((function(e){e.style.outline="3px dashed gray"}))}function m(e){s.forEach((function(e){e.clientHeight>1&&null==e.querySelector(".postbox:not(.hide-if-js)")?(e.classList.add("empty-container"),e.style.outline="3px dashed #c3c4c7",e.setAttribute("data-emptystring",d)):e.style.outline="none"})),null==e.from.querySelector(".postbox:not(.hide-if-js)")&&null!=e.from.querySelector(".postbox.hide-if-js")&&(e.from.classList.add("empty-container"),e.from.style.outline="3px dashed #c3c4c7",e.from.setAttribute("data-emptystring",d)),e.to.className.includes("empty-container")&&(e.to.classList.remove("empty-container"),e.to.style.outline="none",e.to.removeAttribute("data-emptystring"))}function h(){if("nav-menus"!==window.pagenow){var e,t,n,r=document.querySelector('.columns-prefs input[type="radio"]:checked'),i=[],l=[];document.querySelectorAll('[aria-disabled="true"]').forEach((function(e){e.setAttribute("aria-disabled","false")})),n=new URLSearchParams({action:"meta-box-order",_ajax_nonce:document.getElementById("meta-box-order-nonce").value,page_columns:r?r.value:0,page:window.pagenow}),s.forEach((function(e){e.querySelectorAll("details:not( .hide-if-js )").forEach((function(e){i.push(e.id),l.push(e.id)})),n.append("order["+e.id.split("-")[0]+"]",i.join(",")),i=[]})),(e=document.getElementById(l[0]))&&e.parentNode===s[0]&&e.querySelector(".handle-order-higher").setAttribute("aria-disabled","true"),(t=document.getElementById(l[l.length-1]))&&null==t.closest(".postbox-container").nextElementSibling&&t.querySelector(".handle-order-lower").setAttribute("aria-disabled","true"),fetch(ajaxurl,{method:"POST",body:n,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){e.success&&wp.a11y.speak(o("The boxes order has been saved."))}))["catch"]((function(e){console.log(e)}))}}function p(){var e,t,n;"nav-menus"!==window.pagenow&&(e=[...document.querySelectorAll(".postbox:not([open])")].map((function(e){return e.id})).join(","),t=[...document.querySelectorAll(".postbox.hide-if-js")].map((function(e){return e.id})).join(","),n=new URLSearchParams({action:"closed-postboxes",closedpostboxesnonce:document.getElementById("closedpostboxesnonce").value,closed:e,hidden:t,page:window.pagenow}),fetch(ajaxurl,{method:"POST",body:n,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(){}))["catch"]((function(e){console.log(e)})))}if(["dashboard","post"].includes(window.pagenow)&&(null!=s[0].querySelector(".handle-order-higher")&&e[0].setAttribute("aria-disabled","true"),null==r[r.length-1].closest(".postbox-container").nextElementSibling&&t[t.length-1].setAttribute("aria-disabled","true")),n.forEach((function(e){e.addEventListener("click",(function(){var t,n,r,s=e.closest("details"),i=s.previousElementSibling,l=s.nextElementSibling,a=e.closest(".meta-box-sortables");"dashboard_browser_nag"!==s.id&&("true"===e.getAttribute("aria-disabled")?(r=e.className.includes("handle-order-higher")?o("The box is on the first position"):o("The box is on the last position"),wp.a11y.speak(r)):e.className.includes("handle-order-higher")?(null==i||i.className.includes("hide-if-js")?((t=a.parentNode.previousElementSibling.querySelector(".meta-box-sortables")).appendChild(s),null==a.querySelector(".postbox")&&(a.classList.add("empty-container"),a.style.outline="3px dashed #c3c4c7",a.setAttribute("data-emptystring",d)),t.className.includes("empty-container")&&(t.classList.remove("empty-container"),t.style.outline="none",t.removeAttribute("data-emptystring"))):s.parentNode.insertBefore(s,i),e.focus(),h()):e.className.includes("handle-order-lower")&&(null==l||l.className.includes("hide-if-js")?((n=a.parentNode.nextElementSibling.querySelector(".meta-box-sortables")).insertBefore(s,n.querySelector("details")),null==a.querySelector(".postbox")&&(a.classList.add("empty-container"),a.style.outline="3px dashed #c3c4c7",a.setAttribute("data-emptystring",d)),n.className.includes("empty-container")&&(n.classList.remove("empty-container"),n.style.outline="none",n.removeAttribute("data-emptystring"))):s.parentNode.insertBefore(l,s),e.focus(),h()))}))})),r.forEach((function(e){e.addEventListener("toggle",(function(){p()}))})),s.forEach((function(e){Sortable.create(document.getElementById(e.id),{group:"widgets",handle:".hndle",onStart:u,onEnd:m,onChange:h}),"advanced-sortables"!==e.id&&null==e.querySelector(".postbox")&&(e.classList.add("empty-container"),e.setAttribute("data-emptystring",d))})),null!=i&&i.addEventListener("click",(function(e){var t=e.target.parentElement.id+"-hide";e.preventDefault(),document.getElementById(t).checked="false",document.getElementById(t).click()})),l.forEach((function(e){var t=e.value,n="nav-menus"===window.pagenow?document.getElementById(t).closest("li"):document.getElementById(t);null!=n&&(e.checked?n.classList.remove("hide-if-js"):n.classList.add("hide-if-js"),e.addEventListener("click",(function(){n.classList.toggle("hide-if-js"),h(),p()})))})),null!=a&&a.forEach((function(e){e.addEventListener("click",(function(e){var t=parseInt(e.target.value,10);t&&(f(t),h())}))})),null!=c)switch(window.orientation){case 90:case-90:c.length&&c.checked||f(2);break;case 0:case 180:document.getElementById("poststuff").length?f(1):c.length&&c.checked||f(2)}function f(e){var t=document.querySelector(".metabox-holder");t&&(t.className=t.className.replace(/columns-\d+/,"columns-"+e)),h()}document.addEventListener("dragover",(function(e){e.clientY<50?window.scrollTo({top:0,behavior:"smooth"}):e.clientY>window.innerHeight-50&&window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}))}));