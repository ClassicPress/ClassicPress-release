document.addEventListener("DOMContentLoaded",(function(){"use strict";var e,t,n,i,l,c,o,a,r=document.querySelectorAll(".hide-postbox-tog"),u=document.querySelectorAll("#adv-settings .hide-column-tog"),s={},m=document.getElementById("nav-menu-theme-locations"),d=document.getElementById("update-nav-menu"),f=document.getElementById("menu-to-edit"),p=function(e){var t,n;if(!e.getClientRects().length)return{top:0,left:0};return t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}}(f).left,y=!1,v=document.querySelectorAll(".bulk-select-switcher"),g=f?f.querySelectorAll(".menu-item-checkbox"):{},h=!("undefined"==typeof isRtl||!isRtl);function b(e,t){for(var n=e.previousElementSibling;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function S(e){var t,n,i=e.target;e.target.className.includes("edit-menu-item-title")&&(t=i.value,n=i.closest(".menu-item").querySelector(".menu-item-title"),t?(n.textContent=t,n.classList.remove("no-title")):(n.textContent=wp.i18n._x("(no label)","missing menu item navigation label"),n.classList.add("no-title")))}function E(e,t){var n,i,l,c,o,a,r=f.querySelectorAll("li"),u=r.length,s=e.closest("li.menu-item"),m=e.closest("li.menu-item"),d=I(s),p=parseInt(L(s),10),v=parseInt([...r].indexOf(s)+1,10),g=s.nextElementSibling,h=g?I(g):[],b=g?parseInt(L(g),10)+1:0,S=s.previousElementSibling,E=S?parseInt(L(S),10):0,q=s.querySelector(".item-move").getAttribute("aria-label").split(".").join("").replace("Menu","menu").replace("Sub",menus.child);switch(t){case"up":if(n=v-1,1===v)break;1===n&&(x(s,0,p),p=parseInt(L(s),10)),0!==E&&(x(s,E,p),p=parseInt(L(s),10)),S.before(s),B(s),d.length>0&&d.forEach((function(e){s.after(e),B(e),s=e}));break;case"down":if(n=v+1,d.length>0)(g=r[d.length+v])!==undefined&&((h=0!==I(g).length)&&(i=parseInt(L(g),10)+1,x(s,i,p)),g.after(s),d.forEach((function(e){s.after(e),B(e),s=e})));else{if(0!==h.length&&x(s,b,p),u===v)break;g.after(s),B(s)}break;case"top":if(n=1,1===v)break;s.parentNode.prepend(s),B(s),d.length>0&&d.forEach((function(e){s.after(e),B(e),s=e}));break;case"left":if(0===p)break;w(s,-1);break;case"right":if(1===v)break;if(s.querySelector(".menu-item-data-parent-id").value===S.querySelector(".menu-item-data-db-id").value)break;w(s,1)}y=!0,k(),l=f.querySelectorAll(".menu-item-depth-0"),c=" menu item "+([...l].indexOf(m)+1)+" of "+l.length,o=m.querySelector(".item-move").getAttribute("aria-label").split(". "),undefined!==o[1]&&(c=" "+o[1].replace("Menu","menu").replace("Sub",menus.child)),a=q+" "+menus.movedTo+" "+c,wp.a11y.speak(a,"polite")}function q(e,t,n){var i,l,c,o,a,r,u,s,m,d,p,y=e.querySelector(".menu-item-title").textContent;n=n||[...f.querySelectorAll("li")].indexOf(e),null==t&&(t=L(e)),r=0===t?t:parseInt(t-1,10),u=f.querySelectorAll("li").length,e.querySelector(".field-move").style.display=u>1?"":"none",0!==n&&((i=e.querySelector(".menus-move-up")).setAttribute("aria-label",menus.moveUp),i.style.display="inline"),0!==n&&0===t&&((i=e.querySelector(".menus-move-top")).setAttribute("aria-label",menus.moveToTop),i.style.display="inline"),n+1!==u&&0!==n&&((i=e.querySelector(".menus-move-down")).setAttribute("aria-label",menus.moveDown),i.style.display="inline"),0===n&&e.nextElementSibling&&e.nextElementSibling.className.includes("menu-item-depth-"+t)&&((i=e.querySelector(".menus-move-down")).setAttribute("aria-label",menus.moveDown),i.style.display="inline"),0!==t&&(d=b(e,".menu-item-depth-"+r).querySelector(".menu-item-title").textContent,i=e.querySelector(".menus-move-left"),l=menus.outFrom.replace("%s",d),i.style.display="inline",i.setAttribute("aria-label",menus.moveOutFrom.replace("%s",d)),i.textContent=l),0!==n&&e.previousElementSibling&&e.querySelector(".menu-item-data-parent-id").value!==e.previousElementSibling.querySelector(".menu-item-data-db-id").value&&(p=b(e,".menu-item-depth-"+t).querySelector(".menu-item-title").textContent,i=e.querySelector(".menus-move-right"),l=menus.under.replace("%s",p),i.style.display="inline",i.setAttribute("aria-label",menus.moveUnder.replace("%s",p)),i.textContent=l),0===t?(c=f.querySelectorAll(".menu-item-depth-0"),o=[...c].indexOf(e)+1,u=c.length,a=menus.menuFocus.replace("%1$s",y).replace("%2$d",o).replace("%3$d",u)):((s=b(e,".menu-item-depth-"+parseInt(t-1,10))).querySelector(".menu-item-data-db-id").value,m=s.querySelector(".menu-item-title").textContent,o=n-[...f.querySelectorAll("li")].indexOf(s),a=menus.subMenuFocus.replace("%1$s",y).replace("%2$d",o).replace("%3$s",m)),e.querySelector(".item-move").setAttribute("aria-label",a)}function k(){document.querySelectorAll(".menu-item-settings .field-move .menus-move").forEach((function(e){e.style.display="none"})),document.querySelectorAll(".menu-item-edit-active .item-move").forEach((function(e){q(e.closest("li.menu-item"))}))}function L(e){var t,n,i,l=e.className.split(" ");for(t=0,n=l.length;t<n;t++)l[t].startsWith("menu-item-depth-")&&(i=parseInt(l[t].split("-").pop(),10));return i||0}function A(e,t,n){n=n||L(e),e.classList.remove("menu-item-depth-"+n),e.classList.add("menu-item-depth-"+t)}function I(e){for(var t=[],n=L(e),i=e.nextElementSibling;i&&L(i)>n;)t.push(i),i=i.nextElementSibling;return t}function w(e,t){var n=L(e);x(e,n+t,n)}function x(e,t,n){var i=I(e),l=t-n,c=e.querySelector(".is-submenu");A(e,t,n),B(e),i&&i.forEach((function(e){var t=L(e);A(e,t+l,t),B(e)})),c.style.display=0===t?"none":""}function B(e){var t=e.querySelector(".menu-item-data-parent-id"),n=parseInt(L(e),10),i=b(e,".menu-item-depth-"+(n-1));0===n||i===undefined?t.value=0:t.value=i.querySelector(".menu-item-data-db-id").value}function N(e,t,n){var i,l,c,o,a,r=t.nextElementSibling;for(e.after(t),i=0,l=(a=t.className.split(" ")).length;i<l;i++)a[i].startsWith("menu-item-depth-")&&(c=parseInt(a[i].split("-").pop(),10),a[i]="menu-item-depth-"+n);t.className=a.join(" "),t.style.marginLeft="",r&&c<=(o=L(r))&&N(t,r,c===o?n:n+1)}function C(){var e=document.querySelector("#pending-menu-items-to-delete ul");for(f.classList.remove("bulk-selection"),document.getElementById("nav-menu-bulk-actions-top").classList.remove("bulk-selection"),document.getElementById("nav-menu-bulk-actions-bottom").classList.remove("bulk-selection"),"pending-menu-items-to-delete"===document.querySelector(".menu-items-delete").getAttribute("aria-describedby")&&document.querySelector(".menu-items-delete").removeAttribute("aria-describedby"),g.forEach((function(e){e.disabled=!0,e.checked=!1})),document.querySelector(".menu-items-delete").classList.add("disabled");e.lastChild;)e.removeChild(e.lastChild)}function T(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}f||document.querySelector(".menu-location-menus select")?window.addEventListener("beforeunload",(function(e){!0===y&&e.preventDefault()})):document.getElementById("menu-settings-column")&&((o=(e=document.getElementById("menu-settings-column")).querySelectorAll("input").pop()).querySelector("a").setAttribute("href",""),o.addEventListener("click",(function(e){e.preventDefault()})),(a=e.querySelectorAll("select").pop()).querySelector("a").setAttribute("href",""),a.addEventListener("click",(function(e){e.preventDefault()}))),null!==document.querySelector("#menu-locations-wrap form")&&document.querySelector("#menu-locations-wrap form").addEventListener("submit",(function(){})),document.querySelectorAll(".menu-location-menus select").forEach((function(e){e.addEventListener("change",(function(){var t=e.closest("tr").querySelector(".locations-edit-menu-link");e.querySelector("option:selected").dataset.orig?t.style.display="":t.style.display="none"}))})),m&&m.querySelector('input[type="submit"]').addEventListener("click",(function(){var e={action:"menu-locations-save"};e["menu-settings-column-nonce"]=document.getElementById("menu-settings-column-nonce").value,m.querySelectorAll("select").forEach((function(t){e[t.name]=t.value})),m.querySelector(".spinner").classList.add("is-active"),fetch(ajaxurl,{method:"POST",body:new URLSearchParams(e),credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(){m.querySelector(".spinner").classList.remove("is-active")}))["catch"]((function(e){console.log(e)}))}),!1),f&&(f.addEventListener("click",(function(e){var t;e.target.className.includes("menus-move")&&void 0!==(t=e.target.dataset.dir)&&E(e.target.closest("li.menu-item"),t)})),g.forEach((function(e){e.disabled?e.disabled=!1:e.disabled=!0,e.checked&&(e.checked=!1)})),f.addEventListener("change",(function(e){var t;T(e.target)&&e.target.className.includes("menu-item-checkbox")&&(t=document.querySelector(".menu-items-delete"),null!==document.querySelector(".menu-item-checkbox:checked")?t.classList.remove("disabled"):t.classList.add("disabled"))})),f.addEventListener("change",S),f.addEventListener("input",S),f.querySelectorAll("details").forEach((function(e){var t=e.closest("li");e.addEventListener("toggle",(function(){var n,i=e.querySelectorAll(".menu-item-settings p");e.hasAttribute("open")?(i.forEach((function(e){n=e.querySelector("input")?e.querySelector("input"):e.querySelector("textarea"),e.dataset.store=n?"checkbox"===n.type?n.checked:n.value:""})),f.querySelectorAll(".menu-item-edit-active").forEach((function(e){e.classList.remove("menu-item-edit-active"),e.classList.add("menu-item-edit-inactive")})),t.classList.remove("menu-item-edit-inactive"),t.classList.add("menu-item-edit-active"),q(t)):(i.forEach((function(e){e.removeAttribute("data-store")})),e.querySelector("summary").focus())}))})),p+=h?f.innerWidth:0,Sortable.create(f,{group:"menu",handle:".item-move",forceFallback:!!navigator.vendor.match(/apple/i),onChoose:function(e){n=e.originalEvent.clientX,t=L(e.item),c=e.originalEvent.clientX-30*t,q(e.item,t,e.oldIndex),e.item.querySelector("details").removeAttribute("open")},onStart:function(e){var t,n,o=0,a=document.querySelector(".sortable-ghost details");h&&(e.item.style.right="auto"),i=e.item.querySelector(".item-move").getAttribute("aria-label").split(".").join("").replace("Menu","menu").replace("Sub",menus.child),a.style.backgroundColor="#fefefe",a.style.border="1px dotted #444",a.querySelector("summary").style.visibility="hidden",f.addEventListener("dragover",(function(n){var i,a;n.target.closest("li")===e.item&&(l=n.clientX,i=n.clientX-c,(t=n.target.closest("li").previousElementSibling)&&(o=L(t)),null==t||i<0?p=0:((a=Math.floor(i/30))>11&&(a=11),a>o+1&&(a=o+1),p=30*a),document.querySelector(".sortable-ghost").style.marginLeft=p+"px")})),(n=I(e.item)).length>0&&(s.prevItem=e.item,s.menuItem=n[0])},onEnd:function(e){var c,o,a,r,u,m,d,f,p,v=e.item.querySelector("details"),g=0,S=0,E=e.item.className.split(" ");for(e.item.style.marginLeft="",v.style.backgroundColor="#f6f7f7",v.style.border="1px solid #dcdcde",v.querySelector("summary").style.visibility="visible",v.querySelector(".dashicons-move").focus(),h&&(e.item.style.left="auto",e.item.style.right=""),(r=e.item.previousElementSibling)&&(S=L(r)),c=0,o=E.length;c<o;c++)E[c].startsWith("menu-item-depth-")&&(0===e.newDraggableIndex||null==r?E[c]="menu-item-depth-0":(a=Math.floor((l-n)/30),(g=t+a)>11?g=11:g<0&&(g=0),g>S+1&&(g=S+1),E[c]="menu-item-depth-"+g)),e.item.className=E.join(" "),0===g?(e.item.querySelector(".is-submenu").style.display="none",e.item.querySelector(".menu-item-data-parent-id").value=0):(m=g-1,u=b(e.item,".menu-item-depth-"+m),e.item.querySelector(".is-submenu").style.display="",e.item.querySelector(".menu-item-data-parent-id").value=u.querySelector(".menu-item-data-db-id").value);Object.keys(s).length>0&&(N(s.prevItem,s.menuItem,g+1),s={}),n=l,k(),q(e.item,g,e.newDraggableIndex),y=!0,d="",f=e.item.querySelector(".item-move").getAttribute("aria-label").split(". "),undefined!==f[1]&&(d=" "+f[1].replace("Menu","menu").replace("Sub",menus.child)),p=i+" "+menus.movedTo+" "+d,wp.a11y.speak(p,"polite")}})),r.forEach((function(e){e.addEventListener("click",(function(){var e,t=[...document.querySelectorAll("#side-sortables .control-section.hide-if-js details")].map((function(e){return e.id})).join(",");e=new URLSearchParams({action:"closed-postboxes",closedpostboxesnonce:document.getElementById("closedpostboxesnonce").value,hidden:t,page:"nav-menus"}),fetch(ajaxurl,{method:"POST",body:e,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(){}))["catch"]((function(e){console.log(e)}))}))})),document.getElementById("nav-menu-meta")&&(document.getElementById("nav-menu-meta").addEventListener("submit",(function(e){e.preventDefault()})),document.getElementById("nav-menu-meta").addEventListener("input",(function(e){var t,n,i;e.target.className.includes("quick-search")&&(e.target.setAttribute("autocomplete","off"),i=e.target.closest(".tabs-panel"),t&&clearTimeout(t),t=setTimeout((function(){var t,l=e.target.value;l.length<2||n===l||(n=l,i.querySelector(".spinner").classList.add("is-active"),t=new URLSearchParams({action:"menu-quick-search","response-format":"markup",menu:document.getElementById("menu").value,"menu-settings-column-nonce":document.getElementById("menu-settings-column-nonce").value,q:l,type:e.target.getAttribute("name")}),fetch(ajaxurl,{method:"POST",body:t,credentials:"same-origin"}).then((function(e){if(e.ok)return e.text();throw new Error(e.status)})).then((function(e){var t,n,l,c=document.createElement("div"),o={},a=document.getElementById("nav-menu-meta"),r=/menu-item[(\[^]\]*/,u=i.closest(".accordion-section-content"),s=u.querySelector(".button-controls .select-all");if(c.innerHTML=e,!(l=c.querySelectorAll("li")).length)return i.querySelector(".categorychecklist").innerHTML="<li><p>"+wp.i18n.__("No results found.")+"</p></li>",i.querySelector(".spinner").classList.remove("is-active"),void u.classList.add("has-no-menu-item");i.querySelectorAll(".categorychecklist li").forEach((function(e){e.remove()})),l.forEach((function(e){if((t=r.exec(e.innerHTML))&&t[1]){for(n=t[1];a.elements["menu-item["+n+"][menu-item-type]"]||o[n];)n--;o[n]=!0,n!==t[1]&&(e.innerHTML=e.innerHTML.replace(new RegExp("menu-item\\["+t[1]+"\\]","g"),"menu-item["+n+"]"))}i.querySelector(".categorychecklist").append(e)})),i.querySelector(".spinner").classList.remove("is-active"),u.classList.remove("has-no-menu-item"),s.checked&&(s.checked=!1)}))["catch"]((function(e){console.log(e)})))}),500),i.querySelector(".quick-search").addEventListener("blur",(function(){n=""})))}))),d&&(d.addEventListener("submit",(function(e){var t,n,i,l="",c=[],o=document.getElementById("menu-name"),a=o.value,r=[...f.querySelectorAll("li")];if(e.preventDefault(),a&&a.replace(/\s+/,"")){for([t,n]of(f.querySelectorAll(".menu-item-data-position").forEach((function(e){i=r.indexOf(e.closest("li")),e.value=parseInt(i+1,10)})),document.querySelectorAll("#nav-menu-theme-locations select").forEach((function(e){l+='<input type="hidden" name="'+e.name+'" value="'+e.value+'">'})),d.append(l),new FormData(d)))c.push({name:t,value:n});document.querySelector('[name="nav-menu-data"]').value=JSON.stringify(c),y=!1,d.submit()}else o.parentNode.classList.add("form-invalid")})),d.addEventListener("click",(function(e){if(e.target.className.includes("dashicons-move")){var t=e.target.closest("li");e.preventDefault(),t&&t.className.includes("menu-item-edit-inactive")&&(f.querySelectorAll(".menu-item-edit-active").forEach((function(e){e.classList.remove("menu-item-edit-active"),e.classList.add("menu-item-edit-inactive")})),t.classList.remove("menu-item-edit-inactive"),t.classList.add("menu-item-edit-active"))}else if(e.target.className.includes("item-cancel")){var n=e.target.closest("li.menu-item"),i=e.target.closest("details"),l=e.target.closest(".menu-item-settings").querySelectorAll("p");e.preventDefault(),l.forEach((function(e){var t=e.querySelector("input")?e.querySelector("input"):e.querySelector("textarea");t&&("checkbox"===t.type?"true"===e.dataset.store?t.checked=!0:t.checked=!1:t.value=e.dataset.store)})),i.removeAttribute("open"),n.classList.remove("menu-item-edit-active"),n.classList.add("menu-item-edit-inactive")}else if(e.target.className.includes("item-delete")){var c=parseInt(e.target.id.replace("delete-",""),10);e.preventDefault(),u=document.getElementById("menu-item-"+c),s=I(u),document.dispatchEvent(new CustomEvent("menu-removing-item",{detail:u})),u.classList.add("deleting"),u.animate({opacity:[1,0]},{duration:350,iterations:1,easing:"ease-out"}).onfinish=function(){var e,t=document.getElementById("menu-instructions");u.remove(),s.length>0&&B((e=-1,void s.forEach((function(t){var n=L(t),i=n+e;t.classList.remove("menu-item-depth-"+n),t.classList.add("menu-item-depth-"+i),0===i&&(t.querySelector(".is-submenu").style.display="none")})))),0===f.querySelector("li").length&&(document.querySelector(".drag-instructions").style.display="none",t.classList.remove("menu-instructions-inactive")),k(),wp.a11y.speak(menus.itemRemoved)},y=!0}else if(e.target.className.includes("menu-items-delete")){var o,a,r;e.preventDefault(),e.target.className.includes("disabled")||(document.querySelectorAll(".menu-item-checkbox:checked").forEach((function(e){e.closest("li").querySelector("a.item-delete").click()})),document.querySelector(".menu-items-delete").classList.add("disabled"),document.querySelector(".bulk-select-switcher").checked=!1,o="",(a=document.querySelectorAll("#pending-menu-items-to-delete ul li")).forEach((function(e,t){var n=e.querySelector(".pending-menu-item-name").textContent,i=menus.menuItemDeletion.replace("%s",n);o+=i,t+1<a.length&&(o+=", ")})),r=menus.itemsDeleted.replace("%s",o),wp.a11y.speak(r,"polite"),C())}else e.target.className.includes("menu-delete")&&(window.confirm(wp.i18n.__("You are about to permanently delete this menu.\n'Cancel' to stop, 'OK' to delete."))&&(y=!1),y=!0);var u,s})),d.addEventListener("keydown",(function(e){if(e.target.className.includes("dashicons-move")){var t=e.target.closest("li.menu-item");if("Tab"!==e.key&&e.preventDefault(),!["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key))return;if(1===f.querySelector("li").length)return;switch(t.querySelector("details").removeAttribute("open"),e.key){case"ArrowUp":E(t,"up");break;case"ArrowDown":E(t,"down");break;case"ArrowLeft":document.body.className.includes("rtl")?E(t,"right"):E(t,"left");break;case"ArrowRight":document.body.className.includes("rtl")?E(t,"left"):E(t,"right")}e.target.focus()}}))),document.getElementById("menu-name")&&document.getElementById("menu-name").addEventListener("input",_.debounce((function(e){e.target.value&&e.target.value.replace(/\s+/,"")?e.target.parentNode.classList.remove("form-invalid"):e.target.parentNode.classList.add("form-invalid")}),500)),document.querySelectorAll('#add-custom-links input[type="text"]').forEach((function(e){e.addEventListener("keydown",(function(e){document.getElementById("customlinkdiv").classList.remove("form-invalid"),"Enter"===e.key&&(e.preventDefault(),document.getElementById("submit-customlinkdiv").click())}))})),u.forEach((function(e){var t=document.querySelectorAll(".field-"+e.value);e.checked?t.forEach((function(e){e.classList.remove("hidden-field")})):t.forEach((function(e){e.classList.add("hidden-field")})),e.addEventListener("click",(function(){var e,n=[...document.querySelectorAll("#adv-settings .hide-column-tog:not(:checked)")].map((function(e){return e.value})).join(",");t.forEach((function(e){e.classList.toggle("hidden-field")})),e=new URLSearchParams({action:"hidden-columns",screenoptionnonce:document.getElementById("screenoptionnonce").value,hidden:n,page:"nav-menus"}),fetch(ajaxurl,{method:"POST",body:e,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(){}))["catch"]((function(e){console.log(e)}))}))})),document.getElementById("menu-settings-column")&&document.getElementById("menu-settings-column").addEventListener("click",(function(e){var t,n,i,l,c,o,a;if(e.target.className.includes("nav-tab-link"))e.preventDefault(),i=e.target.dataset.type,(l=e.target.closest(".accordion-section-content")).querySelectorAll("input").forEach((function(e){e.checked=!1})),document.querySelectorAll(".tabs-panel").forEach((function(e){e.classList.add("tabs-panel-inactive"),e.classList.remove("tabs-panel-active")})),document.getElementById(i).classList.add("tabs-panel-active"),document.getElementById(i).classList.remove("tabs-panel-inactive"),document.querySelector(".tabs").classList.remove("tabs"),e.target.parentNode.classList.add("tabs"),l.querySelector(".quick-search").focus(),document.querySelector(".tabs-panel-active .menu-item-title")?l.classList.remove("has-no-menu-item"):l.classList.add("has-no-menu-item");else if(e.target.className.includes("select-all"))(t=e.target.closest(".button-controls").dataset.itemsType)&&(c=document.querySelectorAll("#"+t+" .tabs-panel-active .menu-item-title input"),o=document.querySelectorAll("#"+t+" .tabs-panel-active .menu-item-title input:checked"),c.length!==o.length||e.target.checked?e.target.checked&&c.forEach((function(e){e.checked=!0})):c.forEach((function(e){e.checked=!1})));else if(e.target.className.includes("menu-item-checkbox"))(t=e.target.closest(".tabs-panel-active").parentNode.id)&&(c=document.querySelectorAll("#"+t+" .tabs-panel-active .menu-item-title input"),o=document.querySelectorAll("#"+t+" .tabs-panel-active .menu-item-title input:checked"),n=document.querySelector('.button-controls[data-items-type="'+t+'"] .select-all'),c.length!==o.length||n.checked?n.checked&&(n.checked=!1):n.checked=!0);else if(e.target.className.includes("submit-add-to-menu"))if(e.preventDefault(),y=!0,e.target.id&&"submit-customlinkdiv"===e.target.id){var r=document.getElementById("custom-menu-item-url").value.toString(),s=document.getElementById("custom-menu-item-name").value;if(""!==r&&(r=r.trim()),""===r||"https://"==r||"http://"==r)return document.getElementById("customlinkdiv").classList.add("form-invalid"),!1;document.querySelector(".customlinkdiv .spinner").classList.add("is-active"),a=new URLSearchParams({action:"add-menu-item",menu:document.getElementById("menu").value,"menu-settings-column-nonce":document.getElementById("menu-settings-column-nonce").value,"menu-item[-1][menu-item-type]":"custom","menu-item[-1][menu-item-url]":r,"menu-item[-1][menu-item-title]":s}),fetch(ajaxurl,{method:"POST",body:a,credentials:"same-origin"}).then((function(e){if(e.ok)return e.text();throw new Error(e.status)})).then((function(e){f.insertAdjacentHTML("beforeend",e),u.forEach((function(e){var t=f.querySelector(".pending .field-"+e.value);e.checked||t.classList.add("hidden-field")})),wp.a11y.speak(menus.itemAdded),document.dispatchEvent(new CustomEvent("menu-item-added",{detail:e})),document.querySelector(".customlinkdiv .spinner").classList.remove("is-active"),document.getElementById("custom-menu-item-name").value="",document.getElementById("custom-menu-item-name").blur(),document.getElementById("custom-menu-item-url").value="",document.getElementById("custom-menu-item-url").placeholder="https://"}))["catch"]((function(e){console.log(e)}))}else!function(e){var t,n="beforeend",i="add-menu-item",l=menus.oneThemeLocationNoMenus&&null==e.querySelector(".tabs-panel-active .categorychecklist li input:checked")?document.querySelectorAll('#page-all li input[type="checkbox"]'):e.querySelectorAll(".tabs-panel-active .categorychecklist li input:checked"),c=["menu-item-db-id","menu-item-object-id","menu-item-object","menu-item-parent-id","menu-item-position","menu-item-type","menu-item-title","menu-item-url","menu-item-description","menu-item-attr-title","menu-item-target","menu-item-classes","menu-item-xfn"];if(l.length<1||null==f)return!1;e.querySelector(".button-controls .spinner").classList.add("is-active"),t=new URLSearchParams({action:i,menu:document.getElementById("menu").value,"menu-settings-column-nonce":document.getElementById("menu-settings-column-nonce").value}),l.forEach((function(e){var l=parseInt(e.getAttribute("name").replace("menu-item[",""),10),o=e.closest("li");isNaN(l),l||"menu-item"!==i||(l=o.querySelector(".menu-item-data-db-id").value),e.className&&e.className.includes("add-to-top")&&(n="afterbegin"),l&&o.querySelectorAll("input").forEach((function(e){for(var n,o=c.length;o--;)"menu-item"===i?n=c[o]+"["+l+"]":"add-menu-item"===i&&(n="menu-item["+l+"]["+c[o]+"]",e.name&&n===e.name&&t.append(n,e.value))}))})),fetch(ajaxurl,{method:"POST",body:t,credentials:"same-origin"}).then((function(e){if(e.ok)return e.text();throw new Error(e.status)})).then((function(t){var i=document.getElementById("menu-instructions");t=(t=t||"").toString().trim(),f.insertAdjacentHTML(n,t),u.forEach((function(e){var t=f.querySelectorAll(".pending .field-"+e.value);e.checked||t.forEach((function(e){e.classList.add("hidden-field")}))})),wp.a11y.speak(menus.itemAdded),y=!0,document.dispatchEvent(new CustomEvent("menu-item-added",{detail:t})),document.querySelector(".drag-instructions").style.display="",!i.className.includes("menu-instructions-inactive")&&i.parentNode.children.length&&i.classList.add("menu-instructions-inactive"),l.forEach((function(e){e.checked=!1})),e.querySelector(".button-controls .select-all").checked=!1,e.querySelector(".button-controls .spinner").classList.remove("is-active")}))["catch"]((function(e){console.log(e)})),k()}(document.getElementById(e.target.id.replace("submit-","")))})),document.getElementById("nav-menu-meta")&&document.getElementById("nav-menu-meta").addEventListener("click",(function(e){e.target.classname!==undefined&&e.target.classname.includes("page-numbers")&&"a"===e.target.tagName.toLowerCase()&&fetch(ajaxurl,{method:"POST",body:e.target.href.replace(/.*\?/,"").replace(/action=([^&]*)/,"")+"&action=menu-get-metabox",credentials:"same-origin"}).then((function(e){if(e.ok)return e.text();throw new Error(e.status)})).then((function(t){var n,i=JSON.parse(t);-1!==t.indexOf("replace-id")&&(n=document.getElementById(i["replace-id"]),i.markup&&n&&(e.target.closest(".inside").innerHTML=i.markup))}))["catch"]((function(e){console.log(e)}))}),!1),document.getElementById("post-body-content")&&document.getElementById("post-body-content").addEventListener("change",(function(e){var t,n,i,l,c;e.target.className.includes("menu-item-checkbox")&&("pending-menu-items-to-delete"!==document.querySelector(".menu-items-delete").getAttribute("aria-describedby")&&document.querySelector(".menu-items-delete").setAttribute("aria-describedby","pending-menu-items-to-delete"),t=e.target.nextElementSibling.textContent,n=function(e,t){var n=[],i=e.nextElementSibling;for(;i;)i.matches(t)&&n.push(i),i=i.nextElementSibling;return n}(e.target,".item-controls")[0].querySelector(".item-type").textContent,i=e.target.dataset.menuItemId,null!==(l=document.querySelector('#pending-menu-items-to-delete ul li [data-menu-item-id="'+i+'"]'))&&l.remove(),!0===e.target.checked&&((c=document.createElement("li")).dataset.menuItemId=i,c.innerHTML='<span class="pending-menu-item-name">'+t+'</span> <span class="pending-menu-item-type">('+n+')</span><span class="separator"></span>',document.querySelector("#pending-menu-items-to-delete ul").append(c)),document.querySelectorAll("#pending-menu-items-to-delete li .separator").forEach((function(e,t){t===document.querySelectorAll("#pending-menu-items-to-delete li .separator").length-1?e.innerHTML=".":e.innerHTML=", "})))})),[...document.querySelectorAll("#menu-management input"),...document.querySelectorAll("#menu-management select"),document.getElementById("menu-management"),...document.querySelectorAll("#menu-management textarea"),...document.querySelectorAll(".menu-location-menus select")].filter((function(e){return e})).forEach((function(e){e.addEventListener("change",(function(){y=!0}))})),v.forEach((function(e){e.addEventListener("change",(function(){e.checked?(v.forEach((function(e){e.checked=!0})),f.classList.add("bulk-selection"),document.getElementById("nav-menu-bulk-actions-top").classList.add("bulk-selection"),document.getElementById("nav-menu-bulk-actions-bottom").classList.add("bulk-selection"),g.forEach((function(e){e.disabled=!1}))):(v.forEach((function(e){e.checked=!1})),C())}))})),document.addEventListener("menu-item-added",(function(){T(document.querySelector(".bulk-actions"))||(document.querySelector(".bulk-actions").style.display="")})),document.addEventListener("menu-removing-item",(function(e){1===e.detail.closest("#menu-to-edit").querySelector("li").length&&T(document.querySelector(".bulk-actions"))&&(document.querySelector(".bulk-actions").style.display="none")})),document.querySelector(".menu-edit")&&document.querySelector(".menu-edit").addEventListener("focusin",(function(e){var t,n,i;["a","button","input","select","textarea"].includes(e.target.tagName.toLowerCase())&&window.innerWidth>=783&&(t=document.getElementById("nav-menu-footer").innerHeight+20,(n=this.getBoundingClientRect().top-(window.scrollY+window.innerHeight-this.innerHeight))>0&&(n=0),(n*=-1)<t&&(i=document.scrollY,document.scrollY=i+(t-n)))}))}));