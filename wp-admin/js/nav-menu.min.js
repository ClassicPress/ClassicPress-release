!function(e){var t;t=window.wpNavMenu={options:{menuItemDepthPerLevel:30,globalMaxDepth:11,sortableItems:"> *",targetTolerance:0},menuList:undefined,targetList:undefined,menusChanged:!1,isRTL:!("undefined"==typeof isRtl||!isRtl),negateIfRTL:"undefined"!=typeof isRtl&&isRtl?-1:1,lastSearch:"",init:function(){t.menuList=e("#menu-to-edit"),t.targetList=t.menuList,this.jQueryExtensions(),this.attachMenuEditListeners(),this.attachBulkSelectButtonListeners(),this.attachMenuCheckBoxListeners(),this.attachMenuItemDeleteButton(),this.attachPendingMenuItemsListForDeletion(),this.attachQuickSearchListeners(),this.attachThemeLocationsListeners(),this.attachMenuSaveSubmitListeners(),this.attachTabsPanelListeners(),this.attachUnsavedChangesListener(),t.menuList.length&&this.initSortables(),menus.oneThemeLocationNoMenus&&e("#posttype-page").addSelectedToMenu(t.addMenuItemToBottom),this.initManageLocations(),this.initAccessibility(),this.initToggles(),this.initPreviewing()},jQueryExtensions:function(){e.fn.extend({menuItemDepth:function(){var e=t.isRTL?this.eq(0).css("margin-right"):this.eq(0).css("margin-left");return t.pxToDepth(e&&-1!=e.indexOf("px")?e.slice(0,-2):0)},updateDepthClass:function(t,n){return this.each((function(){var i=e(this);n=n||i.menuItemDepth(),e(this).removeClass("menu-item-depth-"+n).addClass("menu-item-depth-"+t)}))},shiftDepthClass:function(t){return this.each((function(){var n=e(this),i=n.menuItemDepth(),a=i+t;n.removeClass("menu-item-depth-"+i).addClass("menu-item-depth-"+a),0===a&&n.find(".is-submenu").hide()}))},childMenuItems:function(){var t=e();return this.each((function(){for(var n=e(this),i=n.menuItemDepth(),a=n.next(".menu-item");a.length&&a.menuItemDepth()>i;)t=t.add(a),a=a.next(".menu-item")})),t},shiftHorizontally:function(t){return this.each((function(){var n=e(this),i=n.menuItemDepth(),a=i+t;n.moveHorizontally(a,i)}))},moveHorizontally:function(t,n){return this.each((function(){var i=e(this),a=i.childMenuItems(),s=t-n,m=i.find(".is-submenu");i.updateDepthClass(t,n).updateParentMenuItemDBId(),a&&a.each((function(){var t=e(this),n=t.menuItemDepth(),i=n+s;t.updateDepthClass(i,n).updateParentMenuItemDBId()})),0===t?m.hide():m.show()}))},updateParentMenuItemDBId:function(){return this.each((function(){var t=e(this),n=t.find(".menu-item-data-parent-id"),i=parseInt(t.menuItemDepth(),10),a=i-1,s=t.prevAll(".menu-item-depth-"+a).first();0===i?n.val(0):n.val(s.find(".menu-item-data-db-id").val())}))},hideAdvancedMenuItemFields:function(){return this.each((function(){var t=e(this);e(".hide-column-tog").not(":checked").each((function(){t.find(".field-"+e(this).val()).addClass("hidden-field")}))}))},addSelectedToMenu:function(n){return 0!==e("#menu-to-edit").length&&this.each((function(){var i=e(this),a={},s=menus.oneThemeLocationNoMenus&&0===i.find(".tabs-panel-active .categorychecklist li input:checked").length?i.find('#page-all li input[type="checkbox"]'):i.find(".tabs-panel-active .categorychecklist li input:checked"),m=/menu-item\[([^\]]*)/;if(n=n||t.addMenuItemToBottom,!s.length)return!1;i.find(".button-controls .spinner").addClass("is-active"),e(s).each((function(){var i=e(this),s=m.exec(i.attr("name")),u="undefined"==typeof s[1]?0:parseInt(s[1],10);this.className&&-1!=this.className.indexOf("add-to-top")&&(n=t.addMenuItemToTop),a[u]=i.closest("li").getItemData("add-menu-item",u)})),t.addItemToMenu(a,n,(function(){s.prop("checked",!1),i.find(".button-controls .select-all").prop("checked",!1),i.find(".button-controls .spinner").removeClass("is-active")}))}))},getItemData:function(e,t){e=e||"menu-item";var n,i={},a=["menu-item-db-id","menu-item-object-id","menu-item-object","menu-item-parent-id","menu-item-position","menu-item-type","menu-item-title","menu-item-url","menu-item-description","menu-item-attr-title","menu-item-target","menu-item-classes","menu-item-xfn"];return t||"menu-item"!=e||(t=this.find(".menu-item-data-db-id").val()),t?(this.find("input").each((function(){var s;for(n=a.length;n--;)"menu-item"==e?s=a[n]+"["+t+"]":"add-menu-item"==e&&(s="menu-item["+t+"]["+a[n]+"]"),this.name&&s==this.name&&(i[a[n]]=this.value)})),i):i},setItemData:function(t,n,i){return n=n||"menu-item",i||"menu-item"!=n||(i=e(".menu-item-data-db-id",this).val()),i?(this.find("input").each((function(){var a,s=e(this);e.each(t,(function(e,t){"menu-item"==n?a=e+"["+i+"]":"add-menu-item"==n&&(a="menu-item["+i+"]["+e+"]"),a==s.attr("name")&&s.val(t)}))})),this):this}})},countMenuItems:function(t){return e(".menu-item-depth-"+t).length},moveMenuItem:function(n,i){var a,s,m,u=e("#menu-to-edit li"),o=u.length,c=n.parents("li.menu-item"),l=c.childMenuItems(),d=c.getItemData(),r=parseInt(c.menuItemDepth(),10),h=parseInt(c.index(),10),p=c.next(),f=p.childMenuItems(),v=parseInt(p.menuItemDepth(),10)+1,g=c.prev(),b=parseInt(g.menuItemDepth(),10),k=g.getItemData()["menu-item-db-id"],I=menus["moved"+i.charAt(0).toUpperCase()+i.slice(1)];switch(i){case"up":if(s=h-1,0===h)break;0===s&&0!==r&&c.moveHorizontally(0,r),0!==b&&c.moveHorizontally(b,r),l?(a=c.add(l)).detach().insertBefore(u.eq(s)).updateParentMenuItemDBId():c.detach().insertBefore(u.eq(s)).updateParentMenuItemDBId();break;case"down":if(l){if(a=c.add(l),(f=0!==(p=u.eq(a.length+h)).childMenuItems().length)&&(m=parseInt(p.menuItemDepth(),10)+1,c.moveHorizontally(m,r)),o===h+a.length)break;a.detach().insertAfter(u.eq(h+a.length)).updateParentMenuItemDBId()}else{if(0!==f.length&&c.moveHorizontally(v,r),o===h+1)break;c.detach().insertAfter(u.eq(h+1)).updateParentMenuItemDBId()}break;case"top":if(0===h)break;l?(a=c.add(l)).detach().insertBefore(u.eq(0)).updateParentMenuItemDBId():c.detach().insertBefore(u.eq(0)).updateParentMenuItemDBId();break;case"left":if(0===r)break;c.shiftHorizontally(-1);break;case"right":if(0===h)break;if(d["menu-item-parent-id"]===k)break;c.shiftHorizontally(1)}n.trigger("focus"),t.registerChange(),t.refreshKeyboardAccessibility(),t.refreshAdvancedAccessibility(),I&&wp.a11y.speak(I)},initAccessibility:function(){var n=e("#menu-to-edit");t.refreshKeyboardAccessibility(),t.refreshAdvancedAccessibility(),n.on("mouseenter.refreshAccessibility focus.refreshAccessibility touchstart.refreshAccessibility",".menu-item",(function(){t.refreshAdvancedAccessibilityOfItem(e(this).find("a.item-edit"))})),n.on("click","a.item-edit",(function(){t.refreshAdvancedAccessibilityOfItem(e(this))})),n.on("click",".menus-move",(function(){var n=e(this).data("dir");void 0!==n&&t.moveMenuItem(e(this).parents("li.menu-item").find("a.item-edit"),n)}))},refreshAdvancedAccessibilityOfItem:function(t){if(!0===e(t).data("needs_accessibility_refresh")){var n,i,a,s,m,u,o,c,l,d=e(t),r=d.closest("li.menu-item").first(),h=r.menuItemDepth(),p=0===h,f=d.closest(".menu-item-handle").find(".menu-item-title").text(),v=parseInt(r.index(),10),g=p?h:parseInt(h-1,10),b=r.prevAll(".menu-item-depth-"+g).first().find(".menu-item-title").text(),k=r.prevAll(".menu-item-depth-"+h).first().find(".menu-item-title").text(),I=e("#menu-to-edit li").length,y=r.nextAll(".menu-item-depth-"+h).length;r.find(".field-move").toggle(I>1),0!==v&&(n=r.find(".menus-move-up")).attr("aria-label",menus.moveUp).css("display","inline"),0!==v&&p&&(n=r.find(".menus-move-top")).attr("aria-label",menus.moveToTop).css("display","inline"),v+1!==I&&0!==v&&(n=r.find(".menus-move-down")).attr("aria-label",menus.moveDown).css("display","inline"),0===v&&0!==y&&(n=r.find(".menus-move-down")).attr("aria-label",menus.moveDown).css("display","inline"),p||(n=r.find(".menus-move-left"),i=menus.outFrom.replace("%s",b),n.attr("aria-label",menus.moveOutFrom.replace("%s",b)).text(i).css("display","inline")),0!==v&&r.find(".menu-item-data-parent-id").val()!==r.prev().find(".menu-item-data-db-id").val()&&(n=r.find(".menus-move-right"),i=menus.under.replace("%s",k),n.attr("aria-label",menus.moveUnder.replace("%s",k)).text(i).css("display","inline")),p?(s=(a=e(".menu-item-depth-0")).index(r)+1,I=a.length,m=menus.menuFocus.replace("%1$s",f).replace("%2$d",s).replace("%3$d",I)):(o=(u=r.prevAll(".menu-item-depth-"+parseInt(h-1,10)).first()).find(".menu-item-data-db-id").val(),c=u.find(".menu-item-title").text(),l=e('.menu-item .menu-item-data-parent-id[value="'+o+'"]'),s=e(l.parents(".menu-item").get().reverse()).index(r)+1,m=menus.subMenuFocus.replace("%1$s",f).replace("%2$d",s).replace("%3$s",c)),d.attr("aria-label",m),d.data("needs_accessibility_refresh",!1)}},refreshAdvancedAccessibility:function(){e(".menu-item-settings .field-move .menus-move").hide(),e("a.item-edit").data("needs_accessibility_refresh",!0),e(".menu-item-edit-active a.item-edit").each((function(){t.refreshAdvancedAccessibilityOfItem(this)}))},refreshKeyboardAccessibility:function(){e("a.item-edit").off("focus").on("focus",(function(){e(this).off("keydown").on("keydown",(function(n){var i,a=e(this),s=a.parents("li.menu-item").getItemData();if((37==n.which||38==n.which||39==n.which||40==n.which)&&(a.off("keydown"),1!==e("#menu-to-edit li").length)){switch(i={38:"up",40:"down",37:"left",39:"right"},e("body").hasClass("rtl")&&(i={38:"up",40:"down",39:"left",37:"right"}),i[n.which]){case"up":t.moveMenuItem(a,"up");break;case"down":t.moveMenuItem(a,"down");break;case"left":t.moveMenuItem(a,"left");break;case"right":t.moveMenuItem(a,"right")}return e("#edit-"+s["menu-item-db-id"]).trigger("focus"),!1}}))}))},initPreviewing:function(){e("#menu-to-edit").on("change input",".edit-menu-item-title",(function(t){var n,i,a=e(t.currentTarget);n=a.val(),i=a.closest(".menu-item").find(".menu-item-title"),n?i.text(n).removeClass("no-title"):i.text(wp.i18n._x("(no label)","missing menu item navigation label")).addClass("no-title")}))},initToggles:function(){postboxes.add_postbox_toggles("nav-menus"),columns.useCheckboxesForHidden(),columns.checked=function(t){e(".field-"+t).removeClass("hidden-field")},columns.unchecked=function(t){e(".field-"+t).addClass("hidden-field")},t.menuList.hideAdvancedMenuItemFields(),e(".hide-postbox-tog").on("click",(function(){var t=e(".accordion-container li.accordion-section").filter(":hidden").map((function(){return this.id})).get().join(",");e.post(ajaxurl,{action:"closed-postboxes",hidden:t,closedpostboxesnonce:jQuery("#closedpostboxesnonce").val(),page:"nav-menus"})}))},initSortables:function(){var n,i,a,s,m,u,o,c,l,d,r=0,h=t.menuList.offset().left,p=e("body"),f=function(){if(!p[0].className)return 0;var e=p[0].className.match(/menu-max-depth-(\d+)/);return e&&e[1]?parseInt(e[1],10):0}();function v(e){var n;s=e.placeholder.prev(".menu-item"),m=e.placeholder.next(".menu-item"),s[0]==e.item[0]&&(s=s.prev(".menu-item")),m[0]==e.item[0]&&(m=m.next(".menu-item")),u=s.length?s.offset().top+s.height():0,o=m.length?m.offset().top+m.height()/3:0,i=m.length?m.menuItemDepth():0,a=s.length?(n=s.menuItemDepth()+1)>t.options.globalMaxDepth?t.options.globalMaxDepth:n:0}function g(e,t){e.placeholder.updateDepthClass(t,r),r=t}0!==e("#menu-to-edit li").length&&e(".drag-instructions").show(),h+=t.isRTL?t.menuList.width():0,t.menuList.sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder",items:t.options.sortableItems,start:function(i,a){var s,m,u,o;t.isRTL&&(a.item[0].style.right="auto"),l=a.item.children(".menu-item-transport"),n=a.item.menuItemDepth(),g(a,n),u=(a.item.next()[0]==a.placeholder[0]?a.item.next():a.item).childMenuItems(),l.append(u),s=l.outerHeight(),s+=s>0?1*a.placeholder.css("margin-top").slice(0,-2):0,s+=a.helper.outerHeight(),c=s,s-=2,a.placeholder.height(s),d=n,u.each((function(){var t=e(this).menuItemDepth();d=t>d?t:d})),m=a.helper.find(".menu-item-handle").outerWidth(),m+=t.depthToPx(d-n),m-=2,a.placeholder.width(m),(o=a.placeholder.next(".menu-item")).css("margin-top",c+"px"),a.placeholder.detach(),e(this).sortable("refresh"),a.item.after(a.placeholder),o.css("margin-top",0),v(a)},stop:function(i,a){var s,m,u,o,c,h,v,g=r-n;s=l.children().insertAfter(a.item),m=a.item.find(".item-title .is-submenu"),0<r?m.show():m.hide(),0!==g&&(a.item.updateDepthClass(r),s.shiftDepthClass(g),function(n){var i,a=f;if(0===n)return;if(n>0)(i=d+n)>f&&(a=i);else if(n<0&&d==f)for(;!e(".menu-item-depth-"+a,t.menuList).length&&a>0;)a--;p.removeClass("menu-max-depth-"+f).addClass("menu-max-depth-"+a),f=a}(g)),t.registerChange(),a.item.updateParentMenuItemDBId(),a.item[0].style.top=0,t.isRTL&&(a.item[0].style.left="auto",a.item[0].style.right=0),t.refreshKeyboardAccessibility(),t.refreshAdvancedAccessibility(),u=a.item.find("a")[2].getAttribute("aria-label").split(".").join("").replace("Menu","menu").replace("Sub",menus.child),o="",c=menus.menuPosition+" "+a.item.index()+1,setTimeout((function(){h=a.item.find("a")[2].getAttribute("aria-label").split(". "),undefined!==h[1]&&(o=" "+h[1].replace("Menu","menu").replace("Sub",menus.child),c=""),v=u+" "+menus.movedTo+" "+c+o,wp.a11y.speak(v,"polite")}),"0")},change:function(e,n){n.placeholder.parent().hasClass("menu")||(s.length?s.after(n.placeholder):t.menuList.prepend(n.placeholder)),v(n)},sort:function(n,s){var l=s.helper.offset(),d=t.isRTL?l.left+s.helper.width():l.left,p=t.negateIfRTL*t.pxToDepth(d-h);p>a||l.top<u-t.options.targetTolerance?p=a:p<i&&(p=i),p!=r&&g(s,p),o&&l.top+c>o&&(m.after(s.placeholder),v(s),e(this).sortable("refreshPositions"))}})},initManageLocations:function(){e("#menu-locations-wrap form").on("submit",(function(){window.onbeforeunload=null})),e(".menu-location-menus select").on("change",(function(){var t=e(this).closest("tr").find(".locations-edit-menu-link");e(this).find("option:selected").data("orig")?t.show():t.hide()}))},attachMenuEditListeners:function(){var t=this;e("#update-nav-menu").on("click",(function(e){if(e.target&&e.target.className){if(-1!=e.target.className.indexOf("item-edit"))return t.eventOnClickEditLink(e.target);if(-1!=e.target.className.indexOf("menu-save"))return t.eventOnClickMenuSave(e.target);if(-1!=e.target.className.indexOf("menu-delete"))return t.eventOnClickMenuDelete(e.target);if(-1!=e.target.className.indexOf("item-delete"))return t.eventOnClickMenuItemDelete(e.target);if(-1!=e.target.className.indexOf("item-cancel"))return t.eventOnClickCancelLink(e.target)}})),e("#menu-name").on("input",_.debounce((function(){var t=e(document.getElementById("menu-name")),n=t.val();n&&n.replace(/\s+/,"")?t.parent().removeClass("form-invalid"):t.parent().addClass("form-invalid")}),500)),e('#add-custom-links input[type="text"]').on("keypress",(function(t){e("#customlinkdiv").removeClass("form-invalid"),13===t.keyCode&&(t.preventDefault(),e("#submit-customlinkdiv").trigger("click"))}))},attachBulkSelectButtonListeners:function(){var t=this;e(".bulk-select-switcher").on("change",(function(){this.checked?(e(".bulk-select-switcher").prop("checked",!0),t.enableBulkSelection()):(e(".bulk-select-switcher").prop("checked",!1),t.disableBulkSelection())}))},enableBulkSelection:function(){var t=e("#menu-to-edit .menu-item-checkbox");e("#menu-to-edit").addClass("bulk-selection"),e("#nav-menu-bulk-actions-top").addClass("bulk-selection"),e("#nav-menu-bulk-actions-bottom").addClass("bulk-selection"),e.each(t,(function(){e(this).prop("disabled",!1)}))},disableBulkSelection:function(){var t=e("#menu-to-edit .menu-item-checkbox");e("#menu-to-edit").removeClass("bulk-selection"),e("#nav-menu-bulk-actions-top").removeClass("bulk-selection"),e("#nav-menu-bulk-actions-bottom").removeClass("bulk-selection"),e(".menu-items-delete").is('[aria-describedby="pending-menu-items-to-delete"]')&&e(".menu-items-delete").removeAttr("aria-describedby"),e.each(t,(function(){e(this).prop("disabled",!0).prop("checked",!1)})),e(".menu-items-delete").addClass("disabled"),e("#pending-menu-items-to-delete ul").empty()},attachMenuCheckBoxListeners:function(){var t=this;e("#menu-to-edit").on("change",".menu-item-checkbox",(function(){t.setRemoveSelectedButtonStatus()}))},attachMenuItemDeleteButton:function(){var t=this;e(document).on("click",".menu-items-delete",(function(n){var i,a,s;n.preventDefault(),e(this).hasClass("disabled")||(e.each(e(".menu-item-checkbox:checked"),(function(t,n){e(n).parents("li").find("a.item-delete").trigger("click")})),e(".menu-items-delete").addClass("disabled"),e(".bulk-select-switcher").prop("checked",!1),i="",a=e("#pending-menu-items-to-delete ul li"),e.each(a,(function(t,n){var s=e(n).find(".pending-menu-item-name").text(),m=menus.menuItemDeletion.replace("%s",s);i+=m,t+1<a.length&&(i+=", ")})),s=menus.itemsDeleted.replace("%s",i),wp.a11y.speak(s,"polite"),t.disableBulkSelection())}))},attachPendingMenuItemsListForDeletion:function(){e("#post-body-content").on("change",".menu-item-checkbox",(function(){var t,n,i,a;e(".menu-items-delete").is('[aria-describedby="pending-menu-items-to-delete"]')||e(".menu-items-delete").attr("aria-describedby","pending-menu-items-to-delete"),t=e(this).next().text(),n=e(this).parent().next(".item-controls").find(".item-type").text(),i=e(this).attr("data-menu-item-id"),(a=e("#pending-menu-items-to-delete ul").find("[data-menu-item-id="+i+"]")).length>0&&a.remove(),!0===this.checked&&e("#pending-menu-items-to-delete ul").append('<li data-menu-item-id="'+i+'"><span class="pending-menu-item-name">'+t+'</span> <span class="pending-menu-item-type">('+n+')</span><span class="separator"></span></li>'),e("#pending-menu-items-to-delete li .separator").html(", "),e("#pending-menu-items-to-delete li .separator").last().html(".")}))},setBulkDeleteCheckboxStatus:function(){var t=e("#menu-to-edit .menu-item-checkbox");e.each(t,(function(){e(this).prop("disabled")?e(this).prop("disabled",!1):e(this).prop("disabled",!0),e(this).is(":checked")&&e(this).prop("checked",!1)})),this.setRemoveSelectedButtonStatus()},setRemoveSelectedButtonStatus:function(){var t=e(".menu-items-delete");e(".menu-item-checkbox:checked").length>0?t.removeClass("disabled"):t.addClass("disabled")},attachMenuSaveSubmitListeners:function(){e("#update-nav-menu").on("submit",(function(){var t=e("#update-nav-menu").serializeArray();e('[name="nav-menu-data"]').val(JSON.stringify(t))}))},attachThemeLocationsListeners:function(){var t=e("#nav-menu-theme-locations"),n={action:"menu-locations-save"};n["menu-settings-column-nonce"]=e("#menu-settings-column-nonce").val(),t.find('input[type="submit"]').on("click",(function(){return t.find("select").each((function(){n[this.name]=e(this).val()})),t.find(".spinner").addClass("is-active"),e.post(ajaxurl,n,(function(){t.find(".spinner").removeClass("is-active")})),!1}))},attachQuickSearchListeners:function(){var n;e("#nav-menu-meta").on("submit",(function(e){e.preventDefault()})),e("#nav-menu-meta").on("input",".quick-search",(function(){var i=e(this);i.attr("autocomplete","off"),n&&clearTimeout(n),n=setTimeout((function(){t.updateQuickSearchResults(i)}),500)})).on("blur",".quick-search",(function(){t.lastSearch=""}))},updateQuickSearchResults:function(n){var i,a,s=n.val();s.length<2||t.lastSearch==s||(t.lastSearch=s,i=n.parents(".tabs-panel"),a={action:"menu-quick-search","response-format":"markup",menu:e("#menu").val(),"menu-settings-column-nonce":e("#menu-settings-column-nonce").val(),q:s,type:n.attr("name")},e(".spinner",i).addClass("is-active"),e.post(ajaxurl,a,(function(e){t.processQuickSearchQueryResponse(e,a,i)})))},addCustomLink:function(n){var i=e("#custom-menu-item-url").val().toString(),a=e("#custom-menu-item-name").val();if(""!==i&&(i=i.trim()),n=n||t.addMenuItemToBottom,""===i||"https://"==i||"http://"==i)return e("#customlinkdiv").addClass("form-invalid"),!1;e(".customlinkdiv .spinner").addClass("is-active"),this.addLinkToMenu(i,a,n,(function(){e(".customlinkdiv .spinner").removeClass("is-active"),e("#custom-menu-item-name").val("").trigger("blur"),e("#custom-menu-item-url").val("").attr("placeholder","https://")}))},addLinkToMenu:function(e,n,i,a){i=i||t.addMenuItemToBottom,a=a||function(){},t.addItemToMenu({"-1":{"menu-item-type":"custom","menu-item-url":e,"menu-item-title":n}},i,a)},addItemToMenu:function(t,n,i){var a,s=e("#menu").val(),m=e("#menu-settings-column-nonce").val();n=n||function(){},i=i||function(){},a={action:"add-menu-item",menu:s,"menu-settings-column-nonce":m,"menu-item":t},e.post(ajaxurl,a,(function(t){var s=e("#menu-instructions");t=(t=t||"").toString().trim(),n(t,a),e("li.pending").hide().fadeIn("slow"),e(".drag-instructions").show(),!s.hasClass("menu-instructions-inactive")&&s.siblings().length&&s.addClass("menu-instructions-inactive"),i()}))},addMenuItemToBottom:function(n){var i=e(n);i.hideAdvancedMenuItemFields().appendTo(t.targetList),t.refreshKeyboardAccessibility(),t.refreshAdvancedAccessibility(),wp.a11y.speak(menus.itemAdded),e(document).trigger("menu-item-added",[i])},addMenuItemToTop:function(n){var i=e(n);i.hideAdvancedMenuItemFields().prependTo(t.targetList),t.refreshKeyboardAccessibility(),t.refreshAdvancedAccessibility(),wp.a11y.speak(menus.itemAdded),e(document).trigger("menu-item-added",[i])},attachUnsavedChangesListener:function(){e("#menu-management input, #menu-management select, #menu-management, #menu-management textarea, .menu-location-menus select").on("change",(function(){t.registerChange()})),0!==e("#menu-to-edit").length||0!==e(".menu-location-menus select").length?window.onbeforeunload=function(){if(t.menusChanged)return wp.i18n.__("The changes you made will be lost if you navigate away from this page.")}:e("#menu-settings-column").find("input,select").end().find("a").attr("href","#").off("click")},registerChange:function(){t.menusChanged=!0},attachTabsPanelListeners:function(){e("#menu-settings-column").on("click",(function(n){var i,a,s,m,u,o=e(n.target);if(o.hasClass("nav-tab-link"))s=o.data("type"),m=o.parents(".accordion-section-content").first(),e("input",m).prop("checked",!1),e(".tabs-panel-active",m).removeClass("tabs-panel-active").addClass("tabs-panel-inactive"),e("#"+s,m).removeClass("tabs-panel-inactive").addClass("tabs-panel-active"),e(".tabs",m).removeClass("tabs"),o.parent().addClass("tabs"),e(".quick-search",m).trigger("focus"),m.find(".tabs-panel-active .menu-item-title").length?m.removeClass("has-no-menu-item"):m.addClass("has-no-menu-item"),n.preventDefault();else if(o.hasClass("select-all"))(i=o.closest(".button-controls").data("items-type"))&&((u=e("#"+i+" .tabs-panel-active .menu-item-title input")).length!==u.filter(":checked").length||o.is(":checked")?o.is(":checked")&&u.prop("checked",!0):u.prop("checked",!1));else if(o.hasClass("menu-item-checkbox"))(i=o.closest(".tabs-panel-active").parent().attr("id"))&&(u=e("#"+i+" .tabs-panel-active .menu-item-title input"),a=e('.button-controls[data-items-type="'+i+'"] .select-all'),u.length!==u.filter(":checked").length||a.is(":checked")?a.is(":checked")&&a.prop("checked",!1):a.prop("checked",!0));else if(o.hasClass("submit-add-to-menu"))return t.registerChange(),n.target.id&&"submit-customlinkdiv"==n.target.id?t.addCustomLink(t.addMenuItemToBottom):n.target.id&&-1!=n.target.id.indexOf("submit-")&&e("#"+n.target.id.replace(/submit-/,"")).addSelectedToMenu(t.addMenuItemToBottom),!1})),e("#nav-menu-meta").on("click","a.page-numbers",(function(){var t=e(this).closest(".inside");return e.post(ajaxurl,this.href.replace(/.*\?/,"").replace(/action=([^&]*)/,"")+"&action=menu-get-metabox",(function(e){var n,i=JSON.parse(e);-1!==e.indexOf("replace-id")&&(n=document.getElementById(i["replace-id"]),i.markup&&n&&t.html(i.markup))})),!1}))},eventOnClickEditLink:function(t){var n,i,a=/#(.*)$/.exec(t.href);if(a&&a[1]&&0!==(i=(n=e("#"+a[1])).parent()).length)return i.hasClass("menu-item-edit-inactive")?(n.data("menu-item-data")||n.data("menu-item-data",n.getItemData()),n.slideDown("fast"),i.removeClass("menu-item-edit-inactive").addClass("menu-item-edit-active")):(n.slideUp("fast"),i.removeClass("menu-item-edit-active").addClass("menu-item-edit-inactive")),!1},eventOnClickCancelLink:function(t){var n=e(t).closest(".menu-item-settings"),i=e(t).closest(".menu-item");return i.removeClass("menu-item-edit-active").addClass("menu-item-edit-inactive"),n.setItemData(n.data("menu-item-data")).hide(),i.find(".menu-item-title").text(n.data("menu-item-data")["menu-item-title"]),!1},eventOnClickMenuSave:function(){var n="",i=e("#menu-name"),a=i.val();return a&&a.replace(/\s+/,"")?(e("#nav-menu-theme-locations select").each((function(){n+='<input type="hidden" name="'+this.name+'" value="'+e(this).val()+'" />'})),e("#update-nav-menu").append(n),t.menuList.find(".menu-item-data-position").val((function(e){return e+1})),window.onbeforeunload=null,!0):(i.parent().addClass("form-invalid"),!1)},eventOnClickMenuDelete:function(){return!!window.confirm(wp.i18n.__("You are about to permanently delete this menu.\n'Cancel' to stop, 'OK' to delete."))&&(window.onbeforeunload=null,!0)},eventOnClickMenuItemDelete:function(n){var i=parseInt(n.id.replace("delete-",""),10);return t.removeMenuItem(e("#menu-item-"+i)),t.registerChange(),!1},processQuickSearchQueryResponse:function(t,n,i){var a,s,m,u={},o=document.getElementById("nav-menu-meta"),c=/menu-item[(\[^]\]*/,l=e("<div>").html(t).find("li"),d=i.closest(".accordion-section-content"),r=d.find(".button-controls .select-all");if(!l.length)return e(".categorychecklist",i).html("<li><p>"+wp.i18n.__("No results found.")+"</p></li>"),e(".spinner",i).removeClass("is-active"),void d.addClass("has-no-menu-item");l.each((function(){if(m=e(this),(a=c.exec(m.html()))&&a[1]){for(s=a[1];o.elements["menu-item["+s+"][menu-item-type]"]||u[s];)s--;u[s]=!0,s!=a[1]&&m.html(m.html().replace(new RegExp("menu-item\\["+a[1]+"\\]","g"),"menu-item["+s+"]"))}})),e(".categorychecklist",i).html(l),e(".spinner",i).removeClass("is-active"),d.removeClass("has-no-menu-item"),r.is(":checked")&&r.prop("checked",!1)},removeMenuItem:function(n){var i=n.childMenuItems();e(document).trigger("menu-removing-item",[n]),n.addClass("deleting").animate({opacity:0,height:0},350,(function(){var a=e("#menu-instructions");n.remove(),i.shiftDepthClass(-1).updateParentMenuItemDBId(),0===e("#menu-to-edit li").length&&(e(".drag-instructions").hide(),a.removeClass("menu-instructions-inactive")),t.refreshAdvancedAccessibility(),wp.a11y.speak(menus.itemRemoved)}))},depthToPx:function(e){return e*t.options.menuItemDepthPerLevel},pxToDepth:function(e){return Math.floor(e/t.options.menuItemDepthPerLevel)}},e((function(){wpNavMenu.init(),e(".menu-edit a, .menu-edit button, .menu-edit input, .menu-edit textarea, .menu-edit select").on("focus",(function(){if(window.innerWidth>=783){var t=e("#nav-menu-footer").height()+20,n=e(this).offset().top-(e(window).scrollTop()+e(window).height()-e(this).height());if(n>0&&(n=0),(n*=-1)<t){var i=e(document).scrollTop();e(document).scrollTop(i+(t-n))}}}))})),e(document).on("menu-item-added",(function(){e(".bulk-actions").is(":visible")||e(".bulk-actions").show()})),e(document).on("menu-removing-item",(function(t,n){1===e(n).parents("#menu-to-edit").find("li").length&&e(".bulk-actions").is(":visible")&&e(".bulk-actions").hide()}))}(jQuery);