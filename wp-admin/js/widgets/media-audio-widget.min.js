!function(e){"use strict";var t,d,a;a=wp.media.view.MediaFrame.AudioDetails.extend({createStates:function(){this.states.add([new wp.media.controller.AudioDetails({media:this.media}),new wp.media.controller.MediaLibrary({type:"audio",id:"add-audio-source",title:wp.media.view.l10n.audioAddSourceTitle,toolbar:"add-audio-source",media:this.media,menu:!1})])}}),t=e.MediaWidgetModel.extend({}),d=e.MediaWidgetControl.extend({showDisplaySettings:!1,mapModelToMediaFrameProps:function(t){var d;return(d=e.MediaWidgetControl.prototype.mapModelToMediaFrameProps.call(this,t)).link="embed",d},renderPreview:function(){var e,t,d,a,i=this;d=i.model.get("attachment_id"),a=i.model.get("url"),(d||a)&&(e=i.$el.find(".media-widget-preview"),t=wp.template("wp-media-widget-audio-preview"),e.html(t({model:{attachment_id:i.model.get("attachment_id"),src:a},error:i.model.get("error")})),wp.mediaelement.initialize())},editMedia:function(){var e,t,d,i=this;t=i.mapModelToMediaFrameProps(i.model.toJSON()),e=new a({frame:"audio",state:"audio-details",metadata:t}),wp.media.frame=e,e.$el.addClass("media-widget"),d=function(e){i.selectedAttachment.set(e),i.model.set(_.extend(i.model.defaults(),i.mapMediaToModelProps(e),{error:!1}))},e.state("audio-details").on("update",d),e.state("replace-audio").on("replace",d),e.on("close",(function(){e.detach()})),e.open()}}),e.controlConstructors.media_audio=d,e.modelConstructors.media_audio=t}(wp.mediaWidgets);