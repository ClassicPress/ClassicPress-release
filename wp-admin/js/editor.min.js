window.wp=window.wp||{},function(e,t){t.editor=t.editor||{},window.switchEditors=new function(){var n,r,i={};function a(){!n&&window.tinymce&&(n=window.tinymce,(r=n.$)(document).on("click",(function(e){var t=r(e.target);t.hasClass("wp-switch-editor")&&c(t.attr("data-wp-editor-id"),t.hasClass("switch-tmce")?"tmce":"html")})))}function o(e){var t=r(".mce-toolbar-grp",e.getContainer())[0],n=t&&t.clientHeight;return n&&n>10&&n<200?parseInt(n,10):30}function c(e,t){e=e||"content",t=t||"toggle";var i,a,c=n.get(e),g=r("#wp-"+e+"-wrap"),f=r("#"+e),m=f[0];if("toggle"===t&&(t=c&&!c.isHidden()?"html":"tmce"),"tmce"===t||"tinymce"===t){if(c&&!c.isHidden())return!1;"undefined"!=typeof window.QTags&&window.QTags.closeAllTags(e),i=parseInt(m.style.height,10)||0;(c?c.getParam("wp_keep_scroll_position"):window.tinyMCEPreInit.mceInit[e]&&window.tinyMCEPreInit.mceInit[e].wp_keep_scroll_position)&&function(e){if(!e||!e.length)return;var t=e[0],n=function(e,t){var n=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],r=t.cursorStart,i=t.cursorEnd,a=p(e,r);a&&(r=-1!==n.indexOf(a.tagType)?a.ltPos:a.gtPos);var o=p(e,i);o&&(i=o.gtPos);var c=s(e,r);c&&!c.showAsPlainText&&(r=c.urlAtStartOfContent?c.endIndex:c.startIndex);var d=s(e,i);d&&!d.showAsPlainText&&(i=d.urlAtEndOfContent?d.startIndex:d.endIndex);return{cursorStart:r,cursorEnd:i}}(t.value,{cursorStart:t.selectionStart,cursorEnd:t.selectionEnd}),i=n.cursorStart,a=n.cursorEnd,o=i!==a?"range":"single",c=null,l=d(r,"&#65279;").attr("data-mce-type","bookmark");if("range"===o){c=[t.value.slice(i,a),l.clone().addClass("mce_SELRES_end")[0].outerHTML].join("")}t.value=[t.value.slice(0,i),l.clone().addClass("mce_SELRES_start")[0].outerHTML,c,t.value.slice(a)].join("")}(f),c?(c.show(),!n.Env.iOS&&i&&(i=i-o(c)+14)>50&&i<5e3&&c.theme.resizeTo(null,i),c.getParam("wp_keep_scroll_position")&&l(c)):n.init(window.tinyMCEPreInit.mceInit[e]),g.removeClass("html-active").addClass("tmce-active"),f.attr("aria-hidden",!0),window.setUserSetting("editor","tinymce")}else if("html"===t){if(c&&c.isHidden())return!1;if(c){n.Env.iOS||(i=(a=c.iframeElement)?parseInt(a.style.height,10):0)&&(i=i+o(c)-14)>50&&i<5e3&&(m.style.height=i+"px");var h=null;c.getParam("wp_keep_scroll_position")&&(h=function(e){var t=e.getWin(),n=t.getSelection();if(!n||n.rangeCount<1)return;var r="SELRES_"+Math.random(),i=d(e.$,r),a=i.clone().addClass("mce_SELRES_start"),o=i.clone().addClass("mce_SELRES_end"),c=n.getRangeAt(0),p=c.startContainer,s=c.startOffset,l=c.cloneRange();e.$(p).parents(".mce-offscreen-selection").length>0?(p=e.$("[data-mce-selected]")[0],a.attr("data-mce-object-selection","true"),o.attr("data-mce-object-selection","true"),e.$(p).before(a[0]),e.$(p).after(o[0])):(l.collapse(!1),l.insertNode(o[0]),l.setStart(p,s),l.collapse(!0),l.insertNode(a[0]),c.setStartAfter(a[0]),c.setEndBefore(o[0]),n.removeAllRanges(),n.addRange(c));e.on("GetContent",u);var g=w(e.getContent());e.off("GetContent",u),a.remove(),o.remove();var f=new RegExp('<span[^>]*\\s*class="mce_SELRES_start"[^>]+>\\s*'+r+"[^<]*<\\/span>(\\s*)"),m=new RegExp('(\\s*)<span[^>]*\\s*class="mce_SELRES_end"[^>]+>\\s*'+r+"[^<]*<\\/span>"),h=g.match(f),v=g.match(m);if(!h)return null;var b=h.index,x=h[0].length,E=null;if(v){-1!==h[0].indexOf("data-mce-object-selection")&&(x-=h[1].length);var y=v.index;-1!==v[0].indexOf("data-mce-object-selection")&&(y-=v[1].length),E=y-x}return{start:b,end:E}}(c)),c.hide(),h&&function(e,t){if(!t)return;var n=e.getElement(),r=t.start,i=t.end||t.start;n.focus&&setTimeout((function(){n.setSelectionRange(r,i),n.blur&&n.blur(),n.focus()}),100)}(c,h)}else f.css({display:"",visibility:""});g.removeClass("tmce-active").addClass("html-active"),f.attr("aria-hidden",!1),window.setUserSetting("editor","html")}}function p(e,t){var n=e.lastIndexOf("<",t-1);if(n>e.lastIndexOf(">",t)||">"===e.substr(t,1)){var r=e.substr(n),i=r.match(/<\s*(\/)?(\w+|\!-{2}.*-{2})/);if(!i)return null;var a=i[2];return{ltPos:n,gtPos:n+r.indexOf(">")+1,tagType:a,isClosingTag:!!i[1]}}return null}function s(e,n){for(var r=function(e){var n,r=function(e){var t=e.match(/\[+([\w_-])+/g),n=[];if(t)for(var r=0;r<t.length;r++){var i=t[r].replace(/^\[+/g,"");-1===n.indexOf(i)&&n.push(i)}return n}(e);if(0===r.length)return[];var i,a=t.shortcode.regexp(r.join("|")),o=[];for(;i=a.exec(e);){var c="["===i[1];n={shortcodeName:i[2],showAsPlainText:c,startIndex:i.index,endIndex:i.index+i[0].length,length:i[0].length},o.push(n)}var p=new RegExp('(^|[\\n\\r][\\n\\r]|<p>)(https?:\\/\\/[^s"]+?)(<\\/p>s*|[\\n\\r][\\n\\r]|$)',"gi");for(;i=p.exec(e);)n={shortcodeName:"url",showAsPlainText:!1,startIndex:i.index,endIndex:i.index+i[0].length,length:i[0].length,urlAtStartOfContent:""===i[1],urlAtEndOfContent:""===i[3]},o.push(n);return o}(e),i=0;i<r.length;i++){var a=r[i];if(n>=a.startIndex&&n<=a.endIndex)return a}}function d(e,t){return e("<span>").css({display:"inline-block",width:0,overflow:"hidden","line-height":0}).html(t||"")}function l(t){var n=t.$(".mce_SELRES_start").attr("data-mce-bogus",1),r=t.$(".mce_SELRES_end").attr("data-mce-bogus",1);if(n.length)if(t.focus(),r.length){var i=t.getDoc().createRange();i.setStartAfter(n[0]),i.setEndBefore(r[0]),t.selection.setRng(i)}else t.selection.select(n[0]);t.getParam("wp_keep_scroll_position")&&function(t,n){var r,i=t.$(n).offset().top,a=t.$(t.getContentAreaContainer()).offset().top,c=o(t),p=e("#wp-content-editor-tools"),s=0,d=0;p.length&&(s=p.height(),d=p.offset().top);var l,g=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=a+i,w=g-(s+c);if(u<w)return;t.settings.wp_autoresize_on?(r=e("html,body"),l=Math.max(u-w/2,d-s)):(r=e(t.contentDocument).find("html,body"),l=i);r.animate({scrollTop:parseInt(l,10)},100)}(t,n),g(n),g(r),t.save()}function g(e){var t=e.parent();e.remove(),!t.is("p")||t.children().length||t.text()||t.remove()}function u(e){e.content=e.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>")}function w(e){var t="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",n=t+"|div|p",r=t+"|pre",i=!1,a=!1,o=[];return e?(-1===e.indexOf("<script")&&-1===e.indexOf("<style")||(e=e.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,(function(e){return o.push(e),"<wp-preserve>"}))),-1!==e.indexOf("<pre")&&(i=!0,e=e.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,(function(e){return(e=(e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")}))),-1!==e.indexOf("[caption")&&(a=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")}))),-1!==(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("\\s*</("+n+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+n+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,(function(e,t){return t&&-1!==t.indexOf("\n")?"\n\n":"\n"}))).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+r+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+r+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")&&(e=(e=e.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")),-1!==e.indexOf("<hr")&&(e=e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/[\r\n]+/g,"")}))),e=(e=(e=(e=e.replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),i&&(e=e.replace(/<wp-line-break>/g,"\n")),a&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),o.length&&(e=e.replace(/<wp-preserve>/g,(function(){return o.shift()}))),e):""}function f(e){var t=!1,n=!1,r="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return-1!==(e=e.replace(/\r\n|\r/g,"\n")).indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/\n+/g,"")}))),-1===(e=e.replace(/<[^<>]+>/g,(function(e){return e.replace(/[\n\t ]+/g," ")}))).indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,(function(e){return e.replace(/\n/g,"<wp-line-break>")}))),-1!==e.indexOf("<figcaption")&&(e=(e=e.replace(/\s*(<figcaption[^>]*>)/g,"$1")).replace(/<\/figcaption>\s*/g,"</figcaption>")),-1!==e.indexOf("[caption")&&(n=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return(e=(e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>")).replace(/<[^<>]+>/g,(function(e){return e.replace(/[\n\t ]+/," ")}))).replace(/\s*\n\s*/g,"<wp-temp-br />")}))),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="\n\n").replace(/<br \/>\s*<br \/>/gi,"\n\n")).replace(new RegExp("(<(?:"+r+")(?: [^>]*)?>)","gi"),"\n\n$1")).replace(new RegExp("(</(?:"+r+")>)","gi"),"$1\n\n")).replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n")).replace(/\s*<option/gi,"<option")).replace(/<\/option>\s*/gi,"</option>")).replace(/\n\s*\n+/g,"\n\n")).replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n")).replace(/<p>\s*?<\/p>/gi,"")).replace(new RegExp("<p>\\s*(</?(?:"+r+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/<p>(<li.+?)<\/p>/gi,"$1")).replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?(?:"+r+")(?: [^>]*)?>)","gi"),"$1")).replace(new RegExp("(</?(?:"+r+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/(<br[^>]*>)\s*\n/gi,"$1")).replace(/\s*\n/g,"<br />\n")).replace(new RegExp("(</?(?:"+r+")[^>]*>)\\s*<br />","gi"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1")).replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]")).replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,(function(e,t,n){return n.match(/<p( [^>]*)?>/)?e:t+"<p>"+n+"</p>"})),t&&(e=e.replace(/<wp-line-break>/g,"\n")),n&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e}function m(t){var n={o:i,data:t,unfiltered:t};return e&&e("body").trigger("beforePreWpautop",[n]),n.data=w(n.data),e&&e("body").trigger("afterPreWpautop",[n]),n.data}function h(t){var n={o:i,data:t,unfiltered:t};return e&&e("body").trigger("beforeWpautop",[n]),n.data=f(n.data),e&&e("body").trigger("afterWpautop",[n]),n.data}return e(document).on("tinymce-editor-init.keep-scroll-position",(function(e,t){t.$(".mce_SELRES_start").length&&l(t)})),e?e(a):document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):window.attachEvent&&(window.attachEvent("onload",a),document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&a()}))),t.editor.autop=h,t.editor.removep=m,i={go:c,wpautop:h,pre_wpautop:m,_wp_Autop:f,_wp_Nop:w}},t.editor.initialize=function(n,r){var i,a;if(e&&n&&t.editor.getDefaultSettings){if(a=t.editor.getDefaultSettings(),r||(r={tinymce:!0}),r.tinymce&&r.quicktags){var o=e("#"+n),c=e("<div>").attr({"class":"wp-core-ui wp-editor-wrap tmce-active",id:"wp-"+n+"-wrap"}),p=e('<div class="wp-editor-container">'),s=e("<button>").attr({type:"button","data-wp-editor-id":n}),d=e('<div class="wp-editor-tools">');if(r.mediaButtons){var l="Add Media";window._wpMediaViewsL10n&&window._wpMediaViewsL10n.addMedia&&(l=window._wpMediaViewsL10n.addMedia);var g=e('<button type="button" class="button insert-media add_media">');g.append('<span class="wp-media-buttons-icon"></span>'),g.append(document.createTextNode(" "+l)),g.data("editor",n),d.append(e('<div class="wp-media-buttons">').append(g))}c.append(d.append(e('<div class="wp-editor-tabs">').append(s.clone().attr({id:n+"-tmce","class":"wp-switch-editor switch-tmce"}).text(window.tinymce.translate("Visual"))).append(s.attr({id:n+"-html","class":"wp-switch-editor switch-html"}).text(window.tinymce.translate("Text")))).append(p)),o.after(c),p.append(o)}window.tinymce&&r.tinymce&&("object"!=typeof r.tinymce&&(r.tinymce={}),(i=e.extend({},a.tinymce,r.tinymce)).selector="#"+n,e(document).trigger("wp-before-tinymce-init",i),window.tinymce.init(i),window.wpActiveEditor||(window.wpActiveEditor=n)),window.quicktags&&r.quicktags&&("object"!=typeof r.quicktags&&(r.quicktags={}),(i=e.extend({},a.quicktags,r.quicktags)).id=n,e(document).trigger("wp-before-quicktags-init",i),window.quicktags(i),window.wpActiveEditor||(window.wpActiveEditor=i.id))}},t.editor.remove=function(t){var n,r,i=e("#wp-"+t+"-wrap");window.tinymce&&(n=window.tinymce.get(t))&&(n.isHidden()||n.save(),n.remove()),window.quicktags&&(r=window.QTags.getInstance(t))&&r.remove(),i.length&&(i.after(e("#"+t)),i.remove())},t.editor.getContent=function(t){var n;if(e&&t)return window.tinymce&&(n=window.tinymce.get(t))&&!n.isHidden()&&n.save(),e("#"+t).val()}}(window.jQuery,window.wp);