!function(e){var s,a,t,n,i,o,r,l,d,p,c,u,h,f=!1;function v(){"function"==typeof zxcvbn?(t.val()?(g(),b()):(t.val(t.data("pw")),t.trigger("pwupdate"),b()),1!==parseInt(d.data("start-masked"),10)?a.addClass("show-password"):d.trigger("click"),e("#pw-weak-text-label").html(userProfileL10n.warnWeak)):setTimeout(v,50)}function w(){d.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),n.focus(),i.attr("for","pass1-text")}function m(){var m,g;s=e(".user-pass1-wrap"),i=s.find("th label").attr("for","pass1-text"),e(".user-pass2-wrap").hide(),c=e("#submit, #wp-submit").on("click",(function(){f=!1})),p=c.add(" #createusersub"),r=e(".pw-weak"),(l=r.find(".pw-checkbox")).change((function(){p.prop("disabled",!l.prop("checked"))})),(t=e("#pass1")).length&&(u=t.val(),a=t.parent(),n=e('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(t[0].className).data("pw",t.data("pw")).val(t.val()).on(h,(function(){n.val()!==u&&(o.val(n.val()),t.val(n.val()).trigger("pwupdate"),u=n.val())})),t.after(n),1===parseInt(t.data("reveal"),10)&&v(),t.on(h+" pwupdate",(function(){t.val()!==u&&(u=t.val(),n.val()!==u&&n.val(u),t.add(n).removeClass("short bad good strong"),b())}))),o=e("#pass2").on(h,(function(){o.val().length>0&&(t.val(o.val()),o.val(""),u="",t.trigger("pwupdate"))})),t.is(":hidden")&&(t.prop("disabled",!0),o.prop("disabled",!0),n.prop("disabled",!0)),m=s.find(".wp-pwd"),g=s.find("button.wp-generate-pw"),(d=s.find(".wp-hide-pw")).show().on("click",(function(){1===parseInt(d.data("toggle"),10)?(a.addClass("show-password"),w(),_.isUndefined(n[0].setSelectionRange)||n[0].setSelectionRange(0,100)):(a.removeClass("show-password"),d.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),t.focus(),i.attr("for","pass1"),_.isUndefined(t[0].setSelectionRange)||t[0].setSelectionRange(0,100))})),g.length&&m.hide(),g.show(),g.on("click",(function(){f=!0,g.hide(),m.show(),t.attr("disabled",!1),o.attr("disabled",!1),n.attr("disabled",!1),0===n.val().length&&v(),_.defer((function(){n.focus(),_.isUndefined(n[0].setSelectionRange)||n[0].setSelectionRange(0,100)}),0)})),s.find("button.wp-cancel-pw").on("click",(function(){f=!1,n.val(""),wp.ajax.post("generate-password").done((function(e){t.data("pw",e)})),g.show(),m.hide(),r.hide(0,(function(){l.removeProp("checked")})),t.prop("disabled",!0),o.prop("disabled",!0),n.prop("disabled",!0),w(),s.closest("form").is("#your-profile")&&(t.val("").trigger("pwupdate"),p.prop("disabled",!1))})),s.closest("form").on("submit",(function(){f=!1,t.prop("disabled",!1),o.prop("disabled",!1),o.val(t.val()),a.removeClass("show-password")}))}function g(){var s=e("#pass1").val();if(e("#pass-strength-result").removeClass("short bad good strong"),s)switch(wp.passwordStrength.meter(s,wp.passwordStrength.userInputBlacklist(),s)){case-1:e("#pass-strength-result").addClass("bad").html(pwsL10n.unknown);break;case 2:e("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:e("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:e("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:e("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:e("#pass-strength-result").addClass("short").html(pwsL10n.short)}else e("#pass-strength-result").html("&nbsp;")}function b(){var s=e("#pass-strength-result")[0];s.className&&(t.add(n).addClass(s.className),e(s).is(".short, .bad")?(l.prop("checked")||p.prop("disabled",!0),r.show()):(p.prop("disabled",!1),r.hide()))}h="oninput"in document.createElement("input")?"input":"keyup",e(document).ready((function(){var s,a,t,n,i=e("#display_name"),o=i.val(),r=e("#wp-admin-bar-my-account").find(".display-name");e("#pass1").val("").on(h+" pwupdate",g),e("#pass-strength-result").show(),e(".color-palette").click((function(){e(this).siblings('input[name="admin_color"]').prop("checked",!0)})),i.length&&(e("#first_name, #last_name, #nickname").bind("blur.user_profile",(function(){var s=[],a={display_nickname:e("#nickname").val()||"",display_username:e("#user_login").val()||"",display_firstname:e("#first_name").val()||"",display_lastname:e("#last_name").val()||""};a.display_firstname&&a.display_lastname&&(a.display_firstlast=a.display_firstname+" "+a.display_lastname,a.display_lastfirst=a.display_lastname+" "+a.display_firstname),e.each(e("option",i),(function(e,a){s.push(a.value)})),e.each(a,(function(t,n){if(n){var o=n.replace(/<\/?[a-z][^>]*>/gi,"");a[t].length&&-1===e.inArray(o,s)&&(s.push(o),e("<option />",{text:o}).appendTo(i))}}))})),i.on("change",(function(){if(t===n){var s=e.trim(this.value)||o;r.text(s)}}))),s=e("#color-picker"),a=e("#colors-css"),t=e("input#user_id").val(),n=e('input[name="checkuser_id"]').val(),s.on("click.colorpicker",".color-option",(function(){var s,i=e(this);if(!i.hasClass("selected")&&(i.siblings(".selected").removeClass("selected"),i.addClass("selected").find('input[type="radio"]').prop("checked",!0),t===n)){if(0===a.length&&(a=e('<link rel="stylesheet" />').appendTo("head")),a.attr("href",i.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{s=e.parseJSON(i.children(".icon_colors").val())}catch(o){}s&&(wp.svgPainter.setColors(s),wp.svgPainter.paint())}e.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:i.children('input[name="admin_color"]').val(),nonce:e("#color-nonce").val()}).done((function(s){s.success&&e("body").removeClass(s.data.previousScheme).addClass(s.data.currentScheme)}))}})),m()})),e("#destroy-sessions").on("click",(function(s){var a=e(this);wp.ajax.post("destroy-sessions",{nonce:e("#_wpnonce").val(),user_id:e("#user_id").val()}).done((function(e){a.prop("disabled",!0),a.siblings(".notice").remove(),a.before('<div class="notice notice-success inline"><p>'+e.message+"</p></div>")})).fail((function(e){a.siblings(".notice").remove(),a.before('<div class="notice notice-error inline"><p>'+e.message+"</p></div>")})),s.preventDefault()})),window.generatePassword=v,e(window).on("beforeunload",(function(){if(!0===f)return userProfileL10n.warn}))}(jQuery);