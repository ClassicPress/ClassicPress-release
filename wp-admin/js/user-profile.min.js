!function(r){var n,i,o,l,d,p,c,u,h,f,v,w,m,g=!1;function b(){"function"==typeof zxcvbn?(o.val()?C():(o.val(o.data("pw")),o.trigger("pwupdate")),x(),1!==parseInt(h.data("start-masked"),10)?i.addClass("show-password"):h.trigger("click"),r("#pw-weak-text-label").html(userProfileL10n.warnWeak)):setTimeout(b,50)}function k(){h.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),l.focus(),d.attr("for","pass1-text")}function y(){var e,s;n=r(".user-pass1-wrap"),d=n.find("th label").attr("for","pass1-text"),r(".user-pass2-wrap").hide(),v=r("#submit, #wp-submit").on("click",function(){g=!1}),f=v.add(" #createusersub"),c=r(".pw-weak"),(u=c.find(".pw-checkbox")).change(function(){f.prop("disabled",!u.prop("checked"))}),(o=r("#pass1")).length&&function a(){w=o.val(),i=o.parent(),l=r('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(o[0].className).data("pw",o.data("pw")).val(o.val()).on(m,function(){l.val()!==w&&(p.val(l.val()),o.val(l.val()).trigger("pwupdate"),w=l.val())}),o.after(l),1===parseInt(o.data("reveal"),10)&&b(),o.on(m+" pwupdate",function(){o.val()!==w&&(w=o.val(),l.val()!==w&&l.val(w),o.add(l).removeClass("short bad good strong"),x())})}(),p=r("#pass2").on(m,function(){0<p.val().length&&(o.val(p.val()),p.val(""),w="",o.trigger("pwupdate"))}),o.is(":hidden")&&(o.prop("disabled",!0),p.prop("disabled",!0),l.prop("disabled",!0)),e=n.find(".wp-pwd"),s=n.find("button.wp-generate-pw"),function t(){(h=n.find(".wp-hide-pw")).show().on("click",function(){1===parseInt(h.data("toggle"),10)?(i.addClass("show-password"),k(),_.isUndefined(l[0].setSelectionRange)||l[0].setSelectionRange(0,100)):(i.removeClass("show-password"),h.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),o.focus(),d.attr("for","pass1"),_.isUndefined(o[0].setSelectionRange)||o[0].setSelectionRange(0,100))})}(),s.length&&e.hide(),s.show(),s.on("click",function(){g=!0,s.hide(),e.show(),o.attr("disabled",!1),p.attr("disabled",!1),l.attr("disabled",!1),0===l.val().length&&b(),_.defer(function(){l.focus(),_.isUndefined(l[0].setSelectionRange)||l[0].setSelectionRange(0,100)},0)}),n.find("button.wp-cancel-pw").on("click",function(){g=!1,l.val(""),wp.ajax.post("generate-password").done(function(e){o.data("pw",e)}),s.show(),e.hide(),c.hide(0,function(){u.removeProp("checked")}),o.prop("disabled",!0),p.prop("disabled",!0),l.prop("disabled",!0),k(),n.closest("form").is("#your-profile")&&(o.val("").trigger("pwupdate"),f.prop("disabled",!1))}),n.closest("form").on("submit",function(){g=!1,o.prop("disabled",!1),p.prop("disabled",!1),p.val(o.val()),i.removeClass("show-password")})}function C(){var e=r("#pass1").val();if(r("#pass-strength-result").removeClass("short bad good strong"),e)switch(wp.passwordStrength.meter(e,wp.passwordStrength.userInputBlacklist(),e)){case-1:r("#pass-strength-result").addClass("bad").html(pwsL10n.unknown);break;case 2:r("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:r("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:r("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:r("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:r("#pass-strength-result").addClass("short").html(pwsL10n["short"])}else r("#pass-strength-result").html("&nbsp;")}function x(){var e=r("#pass-strength-result")[0];e.className&&(o.add(l).addClass(e.className),r(e).is(".short, .bad")?(u.prop("checked")||f.prop("disabled",!0),c.show()):(f.prop("disabled",!1),c.hide()))}m="oninput"in document.createElement("input")?"input":"keyup",r(document).ready(function(){var e,t,n,i,o=r("#display_name"),s=o.val(),a=r("#wp-admin-bar-my-account").find(".display-name");r("#pass1").val("").on(m+" pwupdate",C),r("#pass-strength-result").show(),r(".color-palette").click(function(){r(this).siblings('input[name="admin_color"]').prop("checked",!0)}),o.length&&(r("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var t=[],n={display_nickname:r("#nickname").val()||"",display_username:r("#user_login").val()||"",display_firstname:r("#first_name").val()||"",display_lastname:r("#last_name").val()||""};n.display_firstname&&n.display_lastname&&(n.display_firstlast=n.display_firstname+" "+n.display_lastname,n.display_lastfirst=n.display_lastname+" "+n.display_firstname),r.each(r("option",o),function(e,s){t.push(s.value)}),r.each(n,function(e,s){if(s){var a=s.replace(/<\/?[a-z][^>]*>/gi,"");n[e].length&&-1===r.inArray(a,t)&&(t.push(a),r("<option />",{text:a}).appendTo(o))}})}),o.on("change",function(){if(n===i){var e=r.trim(this.value)||s;a.text(e)}})),e=r("#color-picker"),t=r("#colors-css"),n=r("input#user_id").val(),i=r('input[name="checkuser_id"]').val(),e.on("click.colorpicker",".color-option",function(){var e,s=r(this);if(!s.hasClass("selected")&&(s.siblings(".selected").removeClass("selected"),s.addClass("selected").find('input[type="radio"]').prop("checked",!0),n===i)){if(0===t.length&&(t=r('<link rel="stylesheet" />').appendTo("head")),t.attr("href",s.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{e=r.parseJSON(s.children(".icon_colors").val())}catch(a){}e&&(wp.svgPainter.setColors(e),wp.svgPainter.paint())}r.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:s.children('input[name="admin_color"]').val(),nonce:r("#color-nonce").val()}).done(function(e){e.success&&r("body").removeClass(e.data.previousScheme).addClass(e.data.currentScheme)})}}),y()}),r("#destroy-sessions").on("click",function(e){var s=r(this);wp.ajax.post("destroy-sessions",{nonce:r("#_wpnonce").val(),user_id:r("#user_id").val()}).done(function(e){s.prop("disabled",!0),s.siblings(".notice").remove(),s.before('<div class="notice notice-success inline"><p>'+e.message+"</p></div>")}).fail(function(e){s.siblings(".notice").remove(),s.before('<div class="notice notice-error inline"><p>'+e.message+"</p></div>")}),e.preventDefault()}),window.generatePassword=b,r(window).on("beforeunload",function(){if(!0===g)return userProfileL10n.warn})}(jQuery);