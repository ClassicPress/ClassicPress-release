jQuery((function(e){var t,a=wp.i18n.__;function o(e,t){e.children().addClass("hidden"),e.children("."+t).removeClass("hidden")}function s(e){e.removeClass("has-request-results"),e.next().hasClass("request-results")&&e.next().remove()}function n(t,a,o,n){var r="",i="request-results";s(t),n.length&&(e.each(n,(function(e,t){r=r+"<li>"+t+"</li>"})),r="<ul>"+r+"</ul>"),t.addClass("has-request-results"),t.hasClass("status-request-confirmed")&&(i+=" status-request-confirmed"),t.hasClass("status-request-failed")&&(i+=" status-request-failed"),t.after((function(){return'<tr class="'+i+'"><th colspan="5"><div class="notice inline notice-alt '+a+'"><p>'+o+"</p>"+r+"</div></td></tr>"}))}e(".export-personal-data-handle").on("click",(function(t){var r=e(this),i=r.parents(".export-personal-data"),c=r.parents("tr"),d=c.find(".export-progress"),l=r.parents(".row-actions"),u=i.data("request-id"),p=i.data("nonce"),m=i.data("exporters-count"),f=!!i.data("send-as-email");function v(e){var t=a("An error occurred while attempting to export personal data.");o(i,"export-personal-data-failed"),e&&n(c,"notice-error",t,[e]),setTimeout((function(){l.removeClass("processing")}),500)}function g(e){var t=m>0?e/m:0,a=Math.round(100*t).toString()+"%";d.html(a)}t.preventDefault(),t.stopPropagation(),l.addClass("processing"),i.trigger("blur"),s(c),g(0),o(i,"export-personal-data-processing"),function h(t,s){e.ajax({url:window.ajaxurl,data:{action:"wp-privacy-export-personal-data",exporter:t,id:u,page:s,security:p,sendAsEmail:f},method:"post"}).done((function(e){var r=e.data;e.success?r.done?(g(t),t<m?setTimeout(h(t+1,1)):setTimeout((function(){var e,t;e=r.url,t=a("This user&#8217;s personal data export link was sent."),void 0!==e&&(t=a("This user&#8217;s personal data export file was downloaded.")),o(i,"export-personal-data-success"),n(c,"notice-success",t,[]),void 0!==e?window.location=e:f||v(a("No personal data export file was generated.")),setTimeout((function(){l.removeClass("processing")}),500)}),500)):setTimeout(h(t,s+1)):setTimeout((function(){v(e.data)}),500)})).fail((function(e,t,a){setTimeout((function(){v(a)}),500)}))}(1,1)})),e(".remove-personal-data-handle").on("click",(function(t){var r=e(this),i=r.parents(".remove-personal-data"),c=r.parents("tr"),d=c.find(".erasure-progress"),l=r.parents(".row-actions"),u=i.data("request-id"),p=i.data("nonce"),m=i.data("erasers-count"),f=!1,v=!1,g=[];function h(){var e=a("An error occurred while attempting to find and erase personal data.");o(i,"remove-personal-data-failed"),n(c,"notice-error",e,[]),setTimeout((function(){l.removeClass("processing")}),500)}function w(e){var t=m>0?e/m:0,a=Math.round(100*t).toString()+"%";d.html(a)}t.preventDefault(),t.stopPropagation(),l.addClass("processing"),i.trigger("blur"),s(c),w(0),o(i,"remove-personal-data-processing"),function x(t,s){e.ajax({url:window.ajaxurl,data:{action:"wp-privacy-erase-personal-data",eraser:t,id:u,page:s,security:p},method:"post"}).done((function(e){var r=e.data;e.success?(r.items_removed&&(f=f||r.items_removed),r.items_retained&&(v=v||r.items_retained),r.messages&&(g=g.concat(r.messages)),r.done?(w(t),t<m?setTimeout(x(t+1,1)):setTimeout((function(){var e,t;e=a("No personal data was found for this user."),t="notice-success",o(i,"remove-personal-data-success"),!1===f?!1===v?e=a("No personal data was found for this user."):(e=a("Personal data was found for this user but was not erased."),t="notice-warning"):!1===v?e=a("All of the personal data found for this user was erased."):(e=a("Personal data was found for this user but some of the personal data found was not erased."),t="notice-warning"),n(c,t,e,g),setTimeout((function(){l.removeClass("processing")}),500)}),500)):setTimeout(x(t,s+1))):setTimeout((function(){h()}),500)})).fail((function(){setTimeout((function(){h()}),500)}))}(1,1)})),e(document).on("click",(function(o){var s,n,r=e(o.target),i=r.siblings(".success");if(clearTimeout(t),r.is("button.privacy-text-copy")&&(s=r.closest(".privacy-settings-accordion-panel")).length)try{var c=document.documentElement.scrollTop,d=document.body.scrollTop;window.getSelection().removeAllRanges(),n=document.createRange(),s.addClass("hide-privacy-policy-tutorial"),n.selectNodeContents(s[0]),window.getSelection().addRange(n),document.execCommand("copy"),s.removeClass("hide-privacy-policy-tutorial"),window.getSelection().removeAllRanges(),c>0&&c!==document.documentElement.scrollTop?document.documentElement.scrollTop=c:d>0&&d!==document.body.scrollTop&&(document.body.scrollTop=d),i.addClass("visible"),wp.a11y.speak(a("The suggested policy text has been copied to your clipboard.")),t=setTimeout((function(){i.removeClass("visible")}),3e3)}catch(l){}})),e("body.options-privacy-php label[for=create-page]").on("click",(function(t){t.preventDefault(),e("input#create-page").trigger("focus")})),e(".privacy-settings-accordion").on("click",".privacy-settings-accordion-trigger",(function(){"true"===e(this).attr("aria-expanded")?(e(this).attr("aria-expanded","false"),e("#"+e(this).attr("aria-controls")).attr("hidden",!0)):(e(this).attr("aria-expanded","true"),e("#"+e(this).attr("aria-controls")).attr("hidden",!1))}))}));