!function(s){if("undefined"!=typeof window.tagsSuggestL10n&&"undefined"!=typeof window.uiAutocompleteL10n){var l=0,a=window.tagsSuggestL10n.tagDelimiter||",";s.fn.wpTagsSuggest=function(e){var i,n,u=s(this),r=(e=e||{}).taxonomy||u.attr("data-wp-taxonomy")||"post_tag";return delete e.taxonomy,e=s.extend({source:function(e,a){var t;n!==e.term?(t=function o(e){return c(e).pop()}(e.term),s.get(window.ajaxurl,{action:"ajax-tag-search",tax:r,q:t}).always(function(){u.removeClass("ui-autocomplete-loading")}).done(function(e){var t,o=[];if(e){for(t in e=e.split("\n")){var n=++l;o.push({id:n,name:e[t]})}a(i=o)}else a(o)}),n=e.term):a(i)},focus:function(e,t){u.attr("aria-activedescendant","wp-tags-autocomplete-"+t.item.id),e.preventDefault()},select:function(e,t){var o=c(u.val());return o.pop(),o.push(t.item.name,""),u.val(o.join(a+" ")),s.ui.keyCode.TAB===e.keyCode?(window.wp.a11y.speak(window.tagsSuggestL10n.termSelected,"assertive"),e.preventDefault()):s.ui.keyCode.ENTER===e.keyCode&&(e.preventDefault(),e.stopPropagation()),!1},open:function(){u.attr("aria-expanded","true")},close:function(){u.attr("aria-expanded","false")},minLength:2,position:{my:"left top+2",at:"left bottom",collision:"none"},messages:{noResults:window.uiAutocompleteL10n.noResults,results:function(e){return 1<e?window.uiAutocompleteL10n.manyResults.replace("%d",e):window.uiAutocompleteL10n.oneResult}}},e),u.on("keydown",function(){u.removeAttr("aria-activedescendant")}).autocomplete(e).autocomplete("instance")._renderItem=function(e,t){return s('<li role="option" id="wp-tags-autocomplete-'+t.id+'">').text(t.name).appendTo(e)},u.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":u.autocomplete("widget").attr("id")}).on("focus",function(){c(u.val()).pop()&&u.autocomplete("search")}).autocomplete("widget").addClass("wp-tags-autocomplete").attr("role","listbox").removeAttr("tabindex").on("menufocus",function(e,t){t.item.attr("aria-selected","true")}).on("menublur",function(){s(this).find('[aria-selected="true"]').removeAttr("aria-selected")}),this}}function c(e){return e.split(new RegExp(a+"\\s*"))}}(jQuery);