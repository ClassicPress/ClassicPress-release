var commentsBox,WPSetThumbnailHTML,WPSetThumbnailID,WPRemoveThumbnail,wptitlehint,makeSlugeditClickable,editPermalink;makeSlugeditClickable=editPermalink=function(){},window.wp=window.wp||{},function(s){var t=!1;commentsBox={st:0,get:function(t,e){var i,n=this.st;return e||(e=20),this.st+=e,this.total=t,s("#commentsdiv .spinner").addClass("is-active"),i={action:"get-comments",mode:"single",_ajax_nonce:s("#add_comment_nonce").val(),p:s("#post_ID").val(),start:n,number:e},s.post(ajaxurl,i,function(t){if(t=wpAjax.parseAjaxResponse(t),s("#commentsdiv .widefat").show(),s("#commentsdiv .spinner").removeClass("is-active"),"object"==typeof t&&t.responses[0])return s("#the-comment-list").append(t.responses[0].data),theList=theExtraList=null,s("a[className*=':']").unbind(),void(commentsBox.st>commentsBox.total?s("#show-comments").hide():s("#show-comments").show().children("a").html(postL10n.showcomm));1!=t?s("#the-comment-list").append('<tr><td colspan="2">'+wpAjax.broken+"</td></tr>"):s("#show-comments").html(postL10n.endcomm)}),!1},load:function(t){this.st=jQuery("#the-comment-list tr.comment:visible").length,this.get(t)}},WPSetThumbnailHTML=function(t){s(".inside","#postimagediv").html(t)},WPSetThumbnailID=function(t){var e=s('input[value="_thumbnail_id"]',"#list-table");0<e.length&&s("#meta\\["+e.attr("id").match(/[0-9]+/)+"\\]\\[value\\]").text(t)},WPRemoveThumbnail=function(t){s.post(ajaxurl,{action:"set-post-thumbnail",post_id:s("#post_ID").val(),thumbnail_id:-1,_ajax_nonce:t,cookie:encodeURIComponent(document.cookie)},function(t){"0"==t?alert(setPostThumbnailL10n.error):WPSetThumbnailHTML(t)})},s(document).on("heartbeat-send.refresh-lock",function(t,e){var i=s("#active_post_lock").val(),n=s("#post_ID").val(),a={};n&&s("#post-lock-dialog").length&&(a.post_id=n,i&&(a.lock=i),e["wp-refresh-post-lock"]=a)}).on("heartbeat-tick.refresh-lock",function(t,e){var i,n,a;e["wp-refresh-post-lock"]&&((i=e["wp-refresh-post-lock"]).lock_error?(n=s("#post-lock-dialog")).length&&!n.is(":visible")&&(wp.autosave&&(s(document).one("heartbeat-tick",function(){wp.autosave.server.suspend(),n.removeClass("saving").addClass("saved"),s(window).off("beforeunload.edit-post")}),n.addClass("saving"),wp.autosave.server.triggerSave()),i.lock_error.avatar_src&&(a=s('<img class="avatar avatar-64 photo" width="64" height="64" alt="" />').attr("src",i.lock_error.avatar_src.replace(/&amp;/g,"&")),n.find("div.post-locked-avatar").empty().append(a)),n.show().find(".currently-editing").text(i.lock_error.text),n.find(".wp-tab-first").focus()):i.new_lock&&s("#active_post_lock").val(i.new_lock))}).on("before-autosave.update-post-slug",function(){t=document.activeElement&&"title"===document.activeElement.id}).on("after-autosave.update-post-slug",function(){s("#edit-slug-box > *").length||t||s.post(ajaxurl,{action:"sample-permalink",post_id:s("#post_ID").val(),new_title:s("#title").val(),samplepermalinknonce:s("#samplepermalinknonce").val()},function(t){"-1"!=t&&s("#edit-slug-box").html(t)})})}(jQuery),function(a){var s,t;function n(){s=!1,window.clearTimeout(t),t=window.setTimeout(function(){s=!0},3e5)}a(document).on("heartbeat-send.wp-refresh-nonces",function(t,e){var i,n=a("#wp-auth-check-wrap");(s||n.length&&!n.hasClass("hidden"))&&(i=a("#post_ID").val())&&a("#_wpnonce").val()&&(e["wp-refresh-post-nonces"]={post_id:i})}).on("heartbeat-tick.wp-refresh-nonces",function(t,e){var i=e["wp-refresh-post-nonces"];i&&(n(),i.replace&&a.each(i.replace,function(t,e){a("#"+t).val(e)}),i.heartbeatNonce&&(window.heartbeatSettings.nonce=i.heartbeatNonce))}).ready(function(){n()})}(jQuery),jQuery(document).ready(function(f){var d,e,i,n,a,t,s="",l=f("#content"),c=f(document),v=f("#post_ID").val()||0,o=f("#submitpost"),p=!0,u=f("#post-visibility-select"),h=f("#timestampdiv"),r=f("#post-status-select"),m=!!window.navigator.platform&&-1!==window.navigator.platform.indexOf("Mac");(postboxes.add_postbox_toggles(pagenow),window.name="",f("#post-lock-dialog .notification-dialog").on("keydown",function(t){if(9==t.which){var e=f(t.target);e.hasClass("wp-tab-first")&&t.shiftKey?(f(this).find(".wp-tab-last").focus(),t.preventDefault()):e.hasClass("wp-tab-last")&&!t.shiftKey&&(f(this).find(".wp-tab-first").focus(),t.preventDefault())}}).filter(":visible").find(".wp-tab-first").focus(),wp.heartbeat&&f("#post-lock-dialog").length&&wp.heartbeat.interval(15),i=o.find(":submit, a.submitdelete, #post-preview").on("click.edit-post",function(t){var e=f(this);e.hasClass("disabled")?t.preventDefault():e.hasClass("submitdelete")||e.is("#post-preview")||f("form#post").off("submit.edit-post").on("submit.edit-post",function(t){if(!t.isDefaultPrevented()){if(wp.autosave&&wp.autosave.server.suspend(),"undefined"!=typeof commentReply){if(!commentReply.discardCommentChanges())return!1;commentReply.close()}p=!1,f(window).off("beforeunload.edit-post"),i.addClass("disabled"),"publish"===e.attr("id")?o.find("#major-publishing-actions .spinner").addClass("is-active"):o.find("#minor-publishing .spinner").addClass("is-active")}})}),f("#post-preview").on("click.post-preview",function(t){var e=f(this),i=f("form#post"),n=f("input#wp-preview"),a=e.attr("target")||"wp-preview",s=navigator.userAgent.toLowerCase();t.preventDefault(),e.hasClass("disabled")||(wp.autosave&&wp.autosave.server.tempBlockSave(),n.val("dopreview"),i.attr("target",a).submit().attr("target",""),-1!==s.indexOf("safari")&&-1===s.indexOf("chrome")&&i.attr("action",function(t,e){return e+"?t="+(new Date).getTime()}),n.val(""))}),f("#title").on("keydown.editor-focus",function(t){var e;if(9===t.keyCode&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){if((e="undefined"!=typeof tinymce&&tinymce.get("content"))&&!e.isHidden())e.focus();else{if(!l.length)return;l.focus()}t.preventDefault()}}),f("#auto_draft").val()&&f("#title").blur(function(){var t;this.value&&!f("#edit-slug-box > *").length&&(f("form#post").one("submit",function(){t=!0}),window.setTimeout(function(){!t&&wp.autosave&&wp.autosave.server.triggerSave()},200))}),c.on("autosave-disable-buttons.edit-post",function(){i.addClass("disabled")}).on("autosave-enable-buttons.edit-post",function(){wp.heartbeat&&wp.heartbeat.hasConnectionError()||i.removeClass("disabled")}).on("before-autosave.edit-post",function(){f(".autosave-message").text(postL10n.savingText)}).on("after-autosave.edit-post",function(t,e){f(".autosave-message").text(e.message),f(document.body).hasClass("post-new-php")&&f(".submitbox .submitdelete").show()}),f(window).on("beforeunload.edit-post",function(){var t="undefined"!=typeof tinymce&&tinymce.get("content");if(t&&!t.isHidden()&&t.isDirty()||wp.autosave&&wp.autosave.server.postChanged())return postL10n.saveAlert}).on("unload.edit-post",function(t){if(p&&(!t.target||"#document"==t.target.nodeName)){var e=f("#post_ID").val(),i=f("#active_post_lock").val();if(e&&i){var n={action:"wp-remove-post-lock",_wpnonce:f("#_wpnonce").val(),post_ID:e,active_post_lock:i};if(window.FormData&&window.navigator.sendBeacon){var a=new window.FormData;if(f.each(n,function(t,e){a.append(t,e)}),window.navigator.sendBeacon(ajaxurl,a))return}f.post({async:!1,data:n,url:ajaxurl})}}}),f("#tagsdiv-post_tag").length?window.tagBox&&window.tagBox.init():f(".meta-box-sortables").children("div.postbox").each(function(){if(0===this.id.indexOf("tagsdiv-"))return window.tagBox&&window.tagBox.init(),!1}),f(".categorydiv").each(function(){var t,e,i,a,n;(i=f(this).attr("id").split("-")).shift(),a=i.join("-"),n=a+"_tab","category"==a&&(n="cats"),f("a","#"+a+"-tabs").click(function(t){t.preventDefault();var e=f(this).attr("href");f(this).parent().addClass("tabs").siblings("li").removeClass("tabs"),f("#"+a+"-tabs").siblings(".tabs-panel").hide(),f(e).show(),"#"+a+"-all"==e?deleteUserSetting(n):setUserSetting(n,"pop")}),getUserSetting(n)&&f('a[href="#'+a+'-pop"]',"#"+a+"-tabs").click(),f("#new"+a).one("focus",function(){f(this).val("").removeClass("form-input-tip")}),f("#new"+a).keypress(function(t){13===t.keyCode&&(t.preventDefault(),f("#"+a+"-add-submit").click())}),f("#"+a+"-add-submit").click(function(){f("#new"+a).focus()}),t=function(t){return!!f("#new"+a).val()&&(t.data+="&"+f(":checked","#"+a+"checklist").serialize(),f("#"+a+"-add-submit").prop("disabled",!0),t)},e=function(t,e){var i,n=f("#new"+a+"_parent");f("#"+a+"-add-submit").prop("disabled",!1),"undefined"!=e.parsed.responses[0]&&(i=e.parsed.responses[0].supplemental.newcat_parent)&&(n.before(i),n.remove())},f("#"+a+"checklist").wpList({alt:"",response:a+"-ajax-response",addBefore:t,addAfter:e}),f("#"+a+"-add-toggle").click(function(t){t.preventDefault(),f("#"+a+"-adder").toggleClass("wp-hidden-children"),f('a[href="#'+a+'-all"]',"#"+a+"-tabs").click(),f("#new"+a).focus()}),f("#"+a+"checklist, #"+a+"checklist-pop").on("click",'li.popular-category > label input[type="checkbox"]',function(){var t=f(this),e=t.is(":checked"),i=t.val();i&&t.parents("#taxonomy-"+a).length&&f("#in-"+a+"-"+i+", #in-popular-"+a+"-"+i).prop("checked",e)})}),f("#postcustom").length&&f("#the-list").wpList({addBefore:function(t){return t.data+="&post_id="+f("#post_ID").val(),t},addAfter:function(){f("table#list-table").show()}}),f("#submitdiv").length&&(d=f("#timestamp").html(),e=f("#post-visibility-display").html(),n=function(){"public"!=u.find("input:radio:checked").val()?(f("#sticky").prop("checked",!1),f("#sticky-span").hide()):f("#sticky-span").show(),"password"!=u.find("input:radio:checked").val()?f("#password-span").hide():f("#password-span").show()},a=function(){if(!h.length)return!0;var t,e,i,n,a=f("#post_status"),s=f('option[value="publish"]',a),o=f("#aa").val(),l=f("#mm").val(),c=f("#jj").val(),p=f("#hh").val(),r=f("#mn").val();return t=new Date(o,l-1,c,p,r),e=new Date(f("#hidden_aa").val(),f("#hidden_mm").val()-1,f("#hidden_jj").val(),f("#hidden_hh").val(),f("#hidden_mn").val()),i=new Date(f("#cur_aa").val(),f("#cur_mm").val()-1,f("#cur_jj").val(),f("#cur_hh").val(),f("#cur_mn").val()),t.getFullYear()!=o||1+t.getMonth()!=l||t.getDate()!=c||t.getMinutes()!=r?(h.find(".timestamp-wrap").addClass("form-invalid"),!1):(h.find(".timestamp-wrap").removeClass("form-invalid"),i<t&&"future"!=f("#original_post_status").val()?(n=postL10n.publishOnFuture,f("#publish").val(postL10n.schedule)):t<=i&&"publish"!=f("#original_post_status").val()?(n=postL10n.publishOn,f("#publish").val(postL10n.publish)):(n=postL10n.publishOnPast,f("#publish").val(postL10n.update)),e.toUTCString()==t.toUTCString()?f("#timestamp").html(d):f("#timestamp").html("\n"+n+" <b>"+postL10n.dateFormat.replace("%1$s",f('option[value="'+l+'"]',"#mm").attr("data-text")).replace("%2$s",parseInt(c,10)).replace("%3$s",o).replace("%4$s",("00"+p).slice(-2)).replace("%5$s",("00"+r).slice(-2))+"</b> "),"private"==u.find("input:radio:checked").val()?(f("#publish").val(postL10n.update),0===s.length?a.append('<option value="publish">'+postL10n.privatelyPublished+"</option>"):s.html(postL10n.privatelyPublished),f('option[value="publish"]',a).prop("selected",!0),f("#misc-publishing-actions .edit-post-status").hide()):("future"==f("#original_post_status").val()||"draft"==f("#original_post_status").val()?s.length&&(s.remove(),a.val(f("#hidden_post_status").val())):s.html(postL10n.published),a.is(":hidden")&&f("#misc-publishing-actions .edit-post-status").show()),f("#post-status-display").html(f("option:selected",a).text()),"private"==f("option:selected",a).val()||"publish"==f("option:selected",a).val()?f("#save-post").hide():(f("#save-post").show(),"pending"==f("option:selected",a).val()?f("#save-post").show().val(postL10n.savePending):f("#save-post").show().val(postL10n.saveDraft)),!0)},f("#visibility .edit-visibility").click(function(t){t.preventDefault(),u.is(":hidden")&&(n(),u.slideDown("fast",function(){u.find('input[type="radio"]').first().focus()}),f(this).hide())}),u.find(".cancel-post-visibility").click(function(t){u.slideUp("fast"),f("#visibility-radio-"+f("#hidden-post-visibility").val()).prop("checked",!0),f("#post_password").val(f("#hidden-post-password").val()),f("#sticky").prop("checked",f("#hidden-post-sticky").prop("checked")),f("#post-visibility-display").html(e),f("#visibility .edit-visibility").show().focus(),a(),t.preventDefault()}),u.find(".save-post-visibility").click(function(t){u.slideUp("fast"),f("#visibility .edit-visibility").show().focus(),a(),"public"!=u.find("input:radio:checked").val()&&f("#sticky").prop("checked",!1),s=f("#sticky").prop("checked")?"Sticky":"",f("#post-visibility-display").html(postL10n[u.find("input:radio:checked").val()+s]),t.preventDefault()}),u.find("input:radio").change(function(){n()}),h.siblings("a.edit-timestamp").click(function(t){h.is(":hidden")&&(h.slideDown("fast",function(){f("input, select",h.find(".timestamp-wrap")).first().focus()}),f(this).hide()),t.preventDefault()}),h.find(".cancel-timestamp").click(function(t){h.slideUp("fast").siblings("a.edit-timestamp").show().focus(),f("#mm").val(f("#hidden_mm").val()),f("#jj").val(f("#hidden_jj").val()),f("#aa").val(f("#hidden_aa").val()),f("#hh").val(f("#hidden_hh").val()),f("#mn").val(f("#hidden_mn").val()),a(),t.preventDefault()}),h.find(".save-timestamp").click(function(t){a()&&(h.slideUp("fast"),h.siblings("a.edit-timestamp").show().focus()),t.preventDefault()}),f("#post").on("submit",function(t){a()||(t.preventDefault(),h.show(),wp.autosave&&wp.autosave.enableButtons(),f("#publishing-action .spinner").removeClass("is-active"))}),r.siblings("a.edit-post-status").click(function(t){r.is(":hidden")&&(r.slideDown("fast",function(){r.find("select").focus()}),f(this).hide()),t.preventDefault()}),r.find(".save-post-status").click(function(t){r.slideUp("fast").siblings("a.edit-post-status").show().focus(),a(),t.preventDefault()}),r.find(".cancel-post-status").click(function(t){r.slideUp("fast").siblings("a.edit-post-status").show().focus(),f("#post_status").val(f("#hidden_post_status").val()),a(),t.preventDefault()})),f("#titlediv").on("click",".edit-slug",function(){!function h(){var t,e,n,i,a=0,s=f("#post_name"),o=s.val(),l=f("#sample-permalink"),c=l.html(),p=f("#sample-permalink a").html(),r=f("#edit-slug-buttons"),d=r.html(),u=f("#editable-post-name-full");for(u.find("img").replaceWith(function(){return this.alt}),u=u.html(),l.html(p),n=f("#editable-post-name"),i=n.html(),r.html('<button type="button" class="save button button-small">'+postL10n.ok+'</button> <button type="button" class="cancel button-link">'+postL10n.cancel+"</button>"),r.children(".save").click(function(){var i=n.children("input").val();i!=f("#editable-post-name-full").text()?f.post(ajaxurl,{action:"sample-permalink",post_id:v,new_slug:i,new_title:f("#title").val(),samplepermalinknonce:f("#samplepermalinknonce").val()},function(t){var e=f("#edit-slug-box");e.html(t),e.hasClass("hidden")&&e.fadeIn("fast",function(){e.removeClass("hidden")}),r.html(d),l.html(c),s.val(i),f(".edit-slug").focus(),wp.a11y.speak(postL10n.permalinkSaved)}):r.children(".cancel").click()}),r.children(".cancel").click(function(){f("#view-post-btn").show(),n.html(i),r.html(d),l.html(c),s.val(o),f(".edit-slug").focus()}),t=0;t<u.length;++t)"%"==u.charAt(t)&&a++;e=a>u.length/4?"":u,n.html('<input type="text" id="new-post-slug" value="'+e+'" autocomplete="off" />').children("input").keydown(function(t){var e=t.which;13===e&&(t.preventDefault(),r.children(".save").click()),27===e&&r.children(".cancel").click()}).keyup(function(){s.val(this.value)}).focus()}()}),(wptitlehint=function(t){var e=f("#"+(t=t||"title")),i=f("#"+t+"-prompt-text");""===e.val()&&i.removeClass("screen-reader-text"),i.click(function(){f(this).addClass("screen-reader-text"),e.focus()}),e.blur(function(){""===this.value&&i.removeClass("screen-reader-text")}).focus(function(){i.addClass("screen-reader-text")}).keydown(function(t){i.addClass("screen-reader-text"),f(this).unbind(t)})})(),function(){var i,e,n,t=f("#post-status-info"),a=f("#postdivrich");function s(t){a.hasClass("wp-editor-expand")||(n?i.theme.resizeTo(null,e+t.pageY):l.height(Math.max(50,e+t.pageY)),t.preventDefault())}function o(){var t,e;a.hasClass("wp-editor-expand")||(n?(i.focus(),((e=parseInt(f("#wp-content-editor-container .mce-toolbar-grp").height(),10))<10||200<e)&&(e=30),t=parseInt(f("#content_ifr").css("height"),10)+e-28):(l.focus(),t=parseInt(l.css("height"),10)),c.off(".wp-editor-resize"),t&&50<t&&t<5e3&&setUserSetting("ed_size",t))}!l.length||"ontouchstart"in window?f("#content-resize-handle").hide():t.on("mousedown.wp-editor-resize",function(t){"undefined"!=typeof tinymce&&(i=tinymce.get("content")),i&&!i.isHidden()?(n=!0,e=f("#content_ifr").height()-t.pageY):(n=!1,e=l.height()-t.pageY,l.blur()),c.on("mousemove.wp-editor-resize",s).on("mouseup.wp-editor-resize mouseleave.wp-editor-resize",o),t.preventDefault()}).on("mouseup.wp-editor-resize",o)}(),"undefined"!=typeof tinymce&&(f("#post-formats-select input.post-format").on("change.set-editor-class",function(){var t,e,i=this.id;i&&f(this).prop("checked")&&(t=tinymce.get("content"))&&((e=t.getBody()).className=e.className.replace(/\bpost-format-[^ ]+/,""),t.dom.addClass(e,"post-format-0"==i?"post-format-standard":i),f(document).trigger("editor-classchange"))}),f("#page_template").on("change.set-editor-class",function(){var t,e,i=f(this).val()||"";(i=i.substr(i.lastIndexOf("/")+1,i.length).replace(/\.php$/,"").replace(/\./g,"-"))&&(t=tinymce.get("content"))&&((e=t.getBody()).className=e.className.replace(/\bpage-template-[^ ]+/,""),t.dom.addClass(e,"page-template-"+i),f(document).trigger("editor-classchange"))})),l.on("keydown.wp-autosave",function(t){if(83===t.which){if(t.shiftKey||t.altKey||m&&(!t.metaKey||t.ctrlKey)||!m&&!t.ctrlKey)return;wp.autosave&&wp.autosave.server.triggerSave(),t.preventDefault()}}),"auto-draft"===f("#original_post_status").val()&&window.history.replaceState)&&f("#publish").on("click",function(){t=window.location.href,t+=-1!==t.indexOf("?")?"&":"?",t+="wp-post-new-reload=true",window.history.replaceState(null,null,t)})}),function(t,l){t(function(){var i,n=t("#content"),a=t("#wp-word-count").find(".word-count"),s=0;function o(){var t,e;t=!i||i.isHidden()?n.val():i.getContent({format:"raw"}),(e=l.count(t))!==s&&a.text(e),s=e}t(document).on("tinymce-editor-init",function(t,e){"content"===e.id&&(i=e).on("nodechange keyup",_.debounce(o,1e3))}),n.on("input keyup",_.debounce(o,1e3)),o()})}(jQuery,new wp.utils.WordCounter);