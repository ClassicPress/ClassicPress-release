/*! Iris Color Picker - v1.1.1 - 2021-10-05
* https://github.com/Automattic/Iris
* Copyright (c) 2021 Matt Wiebe; Licensed GPLv2
* Modified 2024-01-18 by Tim Kaye
* to use native HTML5 drag-and-drop and sliders */
!function(t,r){var e,i,s,o,n,a,l,c;if(e='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><input class="iris-slider-offset" type="range"></input></div></div><img class="img-ghost" src="'+IRIS.blank+'" alt="" aria-hidden="true" role="presentation"></div>',a=navigator.userAgent.toLowerCase(),l="Microsoft Internet Explorer"===navigator.appName,c=l?parseFloat(a.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,s=!1,o=["-moz-","-webkit-","-o-","-ms-"],(i=l&&c<10)&&c<=7)return t.fn.iris=t.noop,void(t.support.iris=!1);function h(r,e){return r="top"===r?"top":"left",e=Array.isArray(e)?e:Array.prototype.slice.call(arguments,1),"webkit"===s?function(r,e){var i=[];return r="top"===r?"0% 0%,0% 100%,":"0% 100%,100% 100%,",e=u(e),t.each(e,(function(t,r){i.push("color-stop("+parseFloat(r.stop)/100+", "+r.color+")")})),"-webkit-gradient(linear,"+r+i.join(",")+")"}(r,e):o[s]+"linear-gradient("+r+", "+e.join(", ")+")"}function p(r,e){var i,s,o,n,a;r="top"===r?"top":"left",e=Array.isArray(e)?e:Array.prototype.slice.call(arguments,1),i="top"===r?0:1,s=t(this),o=e.length-1,n='<div class="iris-ie-gradient-shim" style="position:absolute;'+(1===i?"height":"width")+":100%;"+(1===i?"left":"top")+":%start%;"+(1===i?"right":"bottom")+':%end%;filter:%filter%;" data-color:"%color%"></div>',a="","static"===s.css("position")&&s.css({position:"relative"}),e=u(e),t.each(e,(function(t,r){var s,l,c;if(t===o)return!1;s=e[t+1],r.stop!==s.stop&&(l=100-parseFloat(s.stop)+"%",r.octoHex=new Color(r.color).toIEOctoHex(),s.octoHex=new Color(s.color).toIEOctoHex(),c="progid:DXImageTransform.Microsoft.Gradient(GradientType="+i+", StartColorStr='"+r.octoHex+"', EndColorStr='"+s.octoHex+"')",a+=n.replace("%start%",r.stop).replace("%end%",l).replace("%filter%",c))})),s.find(".iris-ie-gradient-shim").remove(),t(a).prependTo(s)}function u(r){var e=[],i=[],s=[],o=r.length-1;return t.each(r,(function(t,r){var s=r,o=!1,n=r.match(/1?[0-9]{1,2}%$/);n&&(s=r.replace(/\s?1?[0-9]{1,2}%$/,""),o=n.shift()),e.push(s),i.push(o)})),!1===i[0]&&(i[0]="0%"),!1===i[o]&&(i[o]="100%"),i=d(i),t.each(i,(function(t){s[t]={color:e[t],stop:i[t]}})),s}function d(r){var e,i,s,o,n=0,a=r.length-1,l=0,c=!1;if(r.length<=2||t.inArray(!1,r)<0)return r;for(;l<r.length-1;)c||!1!==r[l]?c&&!1!==r[l]&&(a=l,l=r.length):(n=l-1,c=!0),l++;for(i=a-n,o=parseInt(r[n].replace("%"),10),e=(parseFloat(r[a].replace("%"))-o)/i,l=n+1,s=1;l<a;)r[l]=o+s*e+"%",s++,l++;return d(r)}t.support.iris=!0,t.fn.gradient=function(){var r=arguments;return this.each((function(){i?p.apply(this,r):t(this).css("backgroundImage",h.apply(this,r))}))},t.fn.rainbowGradient=function(r,e){var i,s,o,n;for(r=r||"top",s="hsl(%h%,"+(i=t.extend({},{s:100,l:50},e)).s+"%,"+i.l+"%)",o=0,n=[];o<=360;)n.push(s.replace("%h%",o)),o+=30;return this.each((function(){t(this).gradient(r,n)}))},n={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1,type:"full",slider:"horizontal"},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var r=this,n=r.element,h=r.options.color||n.val();!1===s&&function(){var r,e="backgroundImage";i?s="filter":(r=t('<div id="iris-gradtest" />'),t.each(o,(function(t,i){if(r.css(e,i+"linear-gradient(top,#fff,#000)"),r.css(e).match("gradient"))return s=t,!1})),!1===s&&(r.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),r.css(e).match("gradient")&&(s="webkit")),r.remove())}(),n.is("input")?(r.options.target?r.picker=t(e).appendTo(r.options.target):r.picker=t(e).insertAfter(n),r._addInputListeners(n)):(n.append(e),r.picker=n.find(".iris-picker")),l?9===c?r.picker.addClass("iris-ie-9"):c<=8&&r.picker.addClass("iris-ie-lt9"):a.indexOf("compatible")<0&&a.indexOf("khtml")<0&&a.match(/mozilla/)&&r.picker.addClass("iris-mozilla"),r.options.palettes&&r._addPalettes(),r.onlySlider="hue"===r.options.type,r.horizontalSlider=r.onlySlider&&"horizontal"===r.options.slider,r.onlySlider&&(r.options.controls.strip="h",h||(h="hsl(10,100,50)")),r._color=new Color(h).setHSpace(r.options.mode),r.options.color=r._color.toString(),r.controls={square:r.picker.find(".iris-square"),squareDrag:r.picker.find(".iris-square-value"),horiz:r.picker.find(".iris-square-horiz"),vert:r.picker.find(".iris-square-vert"),strip:r.picker.find(".iris-strip"),stripSlider:r.picker.find(".iris-strip .iris-slider-offset")},"hsv"===r.options.mode&&r._has("l",r.options.controls)?r.options.controls=r._defaultHSVControls:"hsl"===r.options.mode&&r._has("v",r.options.controls)&&(r.options.controls=r._defaultHSLControls),r.hue=r._color.h(),r.options.hide&&r.picker.hide(),r.options.border&&!r.onlySlider&&r.picker.addClass("iris-border"),r._initControls(),r.active="external",r._dimensions(),r._change()},_has:function(r,e){var i=!1;return t.each(e,(function(t,e){if(r===e)return i=!0,!1})),i},_addPalettes:function(){var r=t('<div class="iris-palette-container" />'),e=t('<a class="iris-palette" tabindex="0" />'),i=Array.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(r=this.picker.find(".iris-palette-container").detach().html("")),t.each(i,(function(t,i){e.clone().data("color",i).css("backgroundColor",i).appendTo(r).height(10).width(10)})),this.picker.append(r)},_paint:function(){var t=this;t.horizontalSlider?t._paintDimension("left","strip"):t._paintDimension("top","strip"),t._paintDimension("top","vert"),t._paintDimension("left","horiz")},_paintDimension:function(t,r){var e,i=this,s=i._color,o=i.options.mode,n=i._getHSpaceColor(),a=i.controls[r],l=i.options.controls;if(r!==i.active&&("square"!==i.active||"strip"===r))switch(l[r]){case"h":if("hsv"===o){switch(n=s.clone(),r){case"horiz":n[l.vert](100);break;case"vert":n[l.horiz](100);break;case"strip":n.setHSpace("hsl")}e=n.toHsl()}else e="strip"===r?{s:n.s,l:n.l}:{s:100,l:n.l};a.rainbowGradient(t,e);break;case"s":"hsv"===o?"vert"===r?e=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===r?e=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===r&&(e=["#fff","hsl("+n.h+",100%,50%)"]):e="vert"===r&&"h"===i.options.controls.horiz?["hsla(0, 0%, "+n.l+"%, 0)","hsla(0, 0%, "+n.l+"%, 1)"]:["hsl("+n.h+",0%,50%)","hsl("+n.h+",100%,50%)"],a.gradient(t,e);break;case"l":e="strip"===r?["hsl("+n.h+",100%,100%)","hsl("+n.h+", "+n.s+"%,50%)","hsl("+n.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],a.gradient(t,e);break;case"v":e="strip"===r?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],a.gradient(t,e)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_stripOnlyDimensions:function(){var t=this,r=this.options.width,e=.12*r;t.horizontalSlider?t.picker.css({width:r,height:e}).addClass("iris-only-strip iris-strip-horiz"):t.picker.css({width:e,height:r}).addClass("iris-only-strip iris-strip-vert")},_dimensions:function(r){if("hue"===this.options.type)return this._stripOnlyDimensions();var e,i,s,o=this,n=o.options,a=o.controls.square,l=o.picker.find(".iris-strip"),c="77.5%",h="12%",p=n.border?n.width-20:n.width,u=Array.isArray(n.palettes)?n.palettes.length:o._palettes.length;if(r&&(a.css("width",""),l.css("width",""),o.picker.css({width:"",height:""})),c=p*(parseFloat(c)/100),h=p*(parseFloat(h)/100),e=n.border?c+20:c,a.width(c).height(c),l.height(c).width(h),o.picker.css({width:n.width,height:e}),!n.palettes)return o.picker.css("paddingBottom","");s=(c-(u-1)*(i=2*c/100))/u,o.picker.find(".iris-palette").each((function(r){var e=0===r?0:i;t(this).css({width:s,height:s,marginLeft:e})})),o.picker.css("paddingBottom",s+i),l.height(s+i+c)},_addInputListeners:function(t){var r=this,e=function(e){var i=new Color(t.val()),s=t.val().replace(/^#/,"");t.removeClass("iris-error"),i.error?""!==s&&t.addClass("iris-error"):i.toString()!==r._color.toString()&&("keyup"===e.type&&s.match(/^[0-9a-fA-F]{3}$/)||r._setOption("color",i.toString()))};t.on("change",e).on("keyup",r._debounce(e,100)),r.options.hide&&t.one("focus",(function(){r.show()}))},_initControls:function(){var r=this,e=navigator.userAgent,i=r.controls,s=i.square,o=r.options.controls,n=r._scale[o.strip];"vertical"===(r.horizontalSlider?"horizontal":"vertical")&&(e.match(/firefox|fxios/i)?i.stripSlider[0].setAttribute("orient","vertical"):(i.stripSlider[0].style.writingMode="vertical-rl",i.stripSlider[0].style.webkitAppearance="slider-vertical")),i.stripSlider[0].setAttribute("min","0"),i.stripSlider[0].setAttribute("max",n),i.stripSlider.on("input",(function(t){r.active="strip",r._color[o.strip](t.currentTarget.value),r._change.apply(r,arguments)})),i.squareDrag[0].style.cursor="move",i.squareDrag[0].setAttribute("draggable","true"),i.squareDrag[0].classList.add("ui-draggable"),i.squareDrag[0].querySelector("span").classList.add("ui-draggable-handle"),i.squareDrag[0].addEventListener("dragstart",(function(t){t.dataTransfer.setDragImage(document.querySelector(".img-ghost"),0,0),i.squareDrag[0].parentNode.classList.add("iris-dragging"),i.squareDrag[0].classList.add("ui-state-focus"),i.squareDrag[0].classList.add("ui-draggable-dragging"),i.squareDrag[0].style.zIndex="1000",i.squareDrag[0].focus()})),i.squareDrag[0].addEventListener("dragend",(function(){i.squareDrag[0].style.zIndex="auto",i.squareDrag[0].classList.remove("ui-state-focus"),i.squareDrag[0].parentNode.classList.remove("iris-dragging")})),i.square[0].addEventListener("dragover",(function(t){var e,s=i.square,o=i.squareDrag,n=r.controls.square.offset();(e={top:t.pageY-n.top,left:t.pageX-n.left}).top<0?e.top=0:e.top>s.height()&&(e.top=s.height()),e.left<0?e.left=0:e.left>s.width()&&(e.left=s.width()),o.css(e),r._squareDrag(t,{position:e})})),i.squareDrag.on("keydown",(function(t){var e=i.square,s=i.squareDrag,o=s.position(),n=r.options.width/100;switch(t.altKey&&(n*=10),t.key){case"ArrowLeft":o.left-=n;break;case"ArrowUp":o.top-=n;break;case"ArrowRight":o.left+=n;break;case"ArrowDown":o.top+=n;break;default:return!0}o.left=Math.max(0,Math.min(o.left,e.width())),o.top=Math.max(0,Math.min(o.top,e.height())),s.css(o),r._squareDrag(t,{position:o}),t.preventDefault()})),s.on("mousedown",(function(e){var i,s;1===e.which&&t(e.target).is("div")&&(i=r.controls.square.offset(),s={top:e.pageY-i.top,left:e.pageX-i.left},e.preventDefault(),r._squareDrag(e,{position:s}),e.target=r.controls.squareDrag.get(0),r.controls.squareDrag.css(s).trigger(e))})),r.options.palettes&&r._paletteListeners()},_paletteListeners:function(){var r=this;r.picker.find(".iris-palette-container").on("click.palette",".iris-palette",(function(){r._color.fromCSS(t(this).data("color")),r.active="external",r._change()})).on("keydown.palette",".iris-palette",(function(r){if(13!==r.keyCode&&32!==r.keyCode)return!0;r.stopPropagation(),t(this).trigger("click")}))},_squareDrag:function(t,r){var e=this,i=e.options.controls,s=e._squareDimensions(),o=Math.round((s.h-r.position.top)/s.h*e._scale[i.vert]),n=e._scale[i.horiz]-Math.round((s.w-r.position.left)/s.w*e._scale[i.horiz]);e._color[i.horiz](n)[i.vert](o),e.active="square",e._change.apply(e,arguments)},_setOption:function(r,e){var i,s,o=this,n=o.options[r],a=!1;switch(o.options[r]=e,r){case"color":o.onlySlider?(e=parseInt(e,10),e=isNaN(e)||e<0||e>359?n:"hsl("+e+",100,50)",o.options.color=o.options[r]=e,o._color=new Color(e).setHSpace(o.options.mode),o.active="external",o._change()):((e=""+e).replace(/^#/,""),(i=new Color(e).setHSpace(o.options.mode)).error?o.options[r]=n:(o._color=i,o.options.color=o.options[r]=o._color.toString(),o.active="external",o._change()));break;case"palettes":a=!0,e?o._addPalettes():o.picker.find(".iris-palette-container").remove(),n||o._paletteListeners();break;case"width":a=!0;break;case"border":a=!0,s=e?"addClass":"removeClass",o.picker[s]("iris-border");break;case"mode":case"controls":if(n===e)return;return s=o.element,(n=o.options).hide=!o.picker.is(":visible"),o.destroy(),o.picker.remove(),t(o.element).iris(n)}a&&o._dimensions(!0)},_squareDimensions:function(t){var e,i=this.controls.square;return t!==r&&i.data("dimensions")?i.data("dimensions"):(this.controls.squareDrag,e={w:i.width(),h:i.height()},i.data("dimensions",e),e)},_isNonHueControl:function(t,r){return"square"===t&&"h"===this.options.controls.strip||"external"!==r&&("h"!==r||"strip"!==t)},_change:function(){var r=this,e=r.controls,i=r._getHSpaceColor(),s=["square","strip"],o=r.options.controls,n=o[r.active]||"external",a=r.hue;"strip"===r.active?s=[]:"external"!==r.active&&s.pop(),t.each(s,(function(t,s){var n,a,l;if(s!==r.active)switch(s){case"strip":n="h"!==o.strip||r.horizontalSlider?i[o.strip]:r._scale[o.strip]-i[o.strip],e.stripSlider.val(n);break;case"square":a=r._squareDimensions(),l={left:i[o.horiz]/r._scale[o.horiz]*a.w,top:a.h-i[o.vert]/r._scale[o.vert]*a.h},r.controls.squareDrag.css(l)}})),i.h!==a&&r._isNonHueControl(r.active,n)&&r._color.h(a),r.hue=r._color.h(),r.options.color=r._color.toString(),r._inited&&r._trigger("change",{type:r.active},{color:r._color}),r.element.is(":input")&&!r._color.error&&(r.element.removeClass("iris-error"),r.onlySlider?r.element.val()!==r.hue&&r.element.val(r.hue):r.element.val()!==r._color.toString()&&r.element.val(r._color.toString())),r._paint(),r._inited=!0,r.active=!1},_debounce:function(t,r,e){var i,s;return function(){var o,n,a=this,l=arguments;return o=function(){i=null,e||(s=t.apply(a,l))},n=e&&!i,clearTimeout(i),i=setTimeout(o,r),n&&(s=t.apply(a,l)),s}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(t){return!0===t?this._color.clone():t===r?this._color.toString():void this.option("color",t)}},t.widget("a8c.iris",n)}(jQuery),
/*! Color.js - v1.1.0 - 2015-12-17
* https://github.com/Automattic/Color.js
* Copyright (c) 2015 Matt Wiebe; Licensed GPLv2 */
function(t,r){var e=function(t,r){return this instanceof e?this._init(t,r):new e(t,r)};e.fn=e.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(t){var e="noop";switch(typeof t){case"object":return t.a!==r&&this.a(t.a),this[e=t.r!==r?"fromRgb":t.l!==r?"fromHsl":t.v!==r?"fromHsv":e](t);case"string":return this.fromCSS(t);case"number":return this.fromInt(parseInt(t,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var t=new e(this.toInt()),r=["_alpha","_hSpace","_hsl","_hsv","error"],i=r.length-1;i>=0;i--)t[r[i]]=this[r[i]];return t},setHSpace:function(t){return this._hSpace="hsv"===t?t:"hsl",this},noop:function(){return this},fromCSS:function(t){var r,e=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,(t=t.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,"")).match(e)&&t.match(/\)$/)){if((r=t.replace(/(\s|%)/g,"").replace(e,"").replace(/,?\);?$/,"").split(",")).length<3)return this._error();if(4===r.length&&(this.a(parseFloat(r.pop())),this.error))return this;for(var i=r.length-1;i>=0;i--)if(r[i]=parseInt(r[i],10),isNaN(r[i]))return this._error();return t.match(/^rgb/)?this.fromRgb({r:r[0],g:r[1],b:r[2]}):t.match(/^hsv/)?this.fromHsv({h:r[0],s:r[1],v:r[2]}):this.fromHsl({h:r[0],s:r[1],l:r[2]})}return this.fromHex(t)},fromRgb:function(t,e){return"object"!=typeof t||t.r===r||t.g===r||t.b===r?this._error():(this.error=!1,this.fromInt(parseInt((t.r<<16)+(t.g<<8)+t.b,10),e))},fromHex:function(t){return 3===(t=t.replace(/^#/,"").replace(/^0x/,"")).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),this.error=!/^[0-9A-F]{6}$/i.test(t),this.fromInt(parseInt(t,16))},fromHsl:function(t){var e,i,s,o,n,a,l,c;return"object"!=typeof t||t.h===r||t.s===r||t.l===r?this._error():(this._hsl=t,this._hSpace="hsl",a=t.h/360,l=t.s/100,c=t.l/100,0===l?e=i=s=c:(n=2*c-(o=c<.5?c*(1+l):c+l-c*l),e=this.hue2rgb(n,o,a+1/3),i=this.hue2rgb(n,o,a),s=this.hue2rgb(n,o,a-1/3)),this.fromRgb({r:255*e,g:255*i,b:255*s},!0))},fromHsv:function(t){var e,i,s,o,n,a,l,c,h,p,u;if("object"!=typeof t||t.h===r||t.s===r||t.v===r)return this._error();switch(this._hsv=t,this._hSpace="hsv",e=t.h/360,i=t.s/100,h=(s=t.v/100)*(1-i),p=s*(1-(c=6*e-(l=Math.floor(6*e)))*i),u=s*(1-(1-c)*i),l%6){case 0:o=s,n=u,a=h;break;case 1:o=p,n=s,a=h;break;case 2:o=h,n=s,a=u;break;case 3:o=h,n=p,a=s;break;case 4:o=u,n=h,a=s;break;case 5:o=s,n=h,a=p}return this.fromRgb({r:255*o,g:255*n,b:255*a},!0)},fromInt:function(t,e){return this._color=parseInt(t,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),e===r&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(r-t)*e:e<.5?r:e<2/3?t+(r-t)*(2/3-e)*6:t},toString:function(){var t=parseInt(this._color,10).toString(16);if(this.error)return"";if(t.length<6)for(var r=6-t.length-1;r>=0;r--)t="0"+t;return"#"+t},toCSS:function(t,r){switch(t=t||"hex",r=parseFloat(r||this._alpha),t){case"rgb":case"rgba":var e=this.toRgb();return r<1?"rgba( "+e.r+", "+e.g+", "+e.b+", "+r+" )":"rgb( "+e.r+", "+e.g+", "+e.b+" )";case"hsl":case"hsla":var i=this.toHsl();return r<1?"hsla( "+i.h+", "+i.s+"%, "+i.l+"%, "+r+" )":"hsl( "+i.h+", "+i.s+"%, "+i.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var t,r,e=this.toRgb(),i=e.r/255,s=e.g/255,o=e.b/255,n=Math.max(i,s,o),a=Math.min(i,s,o),l=(n+a)/2;if(n===a)t=r=0;else{var c=n-a;switch(r=l>.5?c/(2-n-a):c/(n+a),n){case i:t=(s-o)/c+(s<o?6:0);break;case s:t=(o-i)/c+2;break;case o:t=(i-s)/c+4}t/=6}return 0===(t=Math.round(360*t))&&this._hsl.h!==t&&(t=this._hsl.h),0===(r=Math.round(100*r))&&this._hsl.s&&(r=this._hsl.s),{h:t,s:r,l:Math.round(100*l)}},toHsv:function(){var t,r,e=this.toRgb(),i=e.r/255,s=e.g/255,o=e.b/255,n=Math.max(i,s,o),a=Math.min(i,s,o),l=n,c=n-a;if(r=0===n?0:c/n,n===a)t=r=0;else{switch(n){case i:t=(s-o)/c+(s<o?6:0);break;case s:t=(o-i)/c+2;break;case o:t=(i-s)/c+4}t/=6}return 0===(t=Math.round(360*t))&&this._hsv.h!==t&&(t=this._hsv.h),0===(r=Math.round(100*r))&&this._hsv.s&&(r=this._hsv.s),{h:t,s:r,v:Math.round(100*l)}},toInt:function(){return this._color},toIEOctoHex:function(){var t=this.toString(),r=parseInt(255*this._alpha,10).toString(16);return 1===r.length&&(r="0"+r),"#"+r+t.replace(/^#/,"")},toLuminosity:function(){var t=this.toRgb(),r={};for(var e in t)if(t.hasOwnProperty(e)){var i=t[e]/255;r[e]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*r.r+.7152*r.g+.0722*r.b},getDistanceLuminosityFrom:function(t){if(!(t instanceof e))throw"getDistanceLuminosityFrom requires a Color object";var r=this.toLuminosity(),i=t.toLuminosity();return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)},getMaxContrastColor:function(){var t=this.getDistanceLuminosityFrom(new e("#000")),r=this.getDistanceLuminosityFrom(new e("#fff"));return new e(t>=r?"#000":"#fff")},getReadableContrastingColor:function(t,i){if(!(t instanceof e))return this;var s,o,n=i===r?5:i,a=t.getDistanceLuminosityFrom(this);if(a>=n)return this;if((s=t.getMaxContrastColor()).getDistanceLuminosityFrom(t)<=n)return s;for(o=0===s.toInt()?-1:1;a<n&&(this.l(o,!0),a=this.getDistanceLuminosityFrom(t),0!==this._color&&16777215!==this._color););return this},a:function(t){if(t===r)return this._alpha;var e=parseFloat(t);return isNaN(e)?this._error():(this._alpha=e,this)},darken:function(t){return t=t||5,this.l(-t,!0)},lighten:function(t){return t=t||5,this.l(t,!0)},saturate:function(t){return t=t||15,this.s(t,!0)},desaturate:function(t){return t=t||15,this.s(-t,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(t){var r=180+30*(t=t||1);return this.h(r,!0)},getAnalog:function(t){var r=30*(t=t||1);return this.h(r,!0)},getTetrad:function(t){var r=60*(t=t||1);return this.h(r,!0)},getTriad:function(t){var r=120*(t=t||1);return this.h(r,!0)},_partial:function(t){var e=i[t];return function(i,s){var o=this._spaceFunc("to",e.space);return i===r?o[t]:(!0===s&&(i=o[t]+i),e.mod&&(i%=e.mod),e.range&&(i=i<e.range[0]?e.range[0]:i>e.range[1]?e.range[1]:i),o[t]=i,this._spaceFunc("from",e.space,o))}},_spaceFunc:function(t,r,e){var i=r||this._hSpace;return this[t+i.charAt(0).toUpperCase()+i.substr(1)](e)}};var i={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var s in i)i.hasOwnProperty(s)&&(e.fn[s]=e.fn._partial(s));"object"==typeof exports?module.exports=e:t.Color=e}(this);