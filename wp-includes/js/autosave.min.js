window.autosave=function(){return!0},function(x,b){b.wp=b.wp||{},b.wp.autosave=function t(){var g,r=0,w=x(document);function m(t){var e,n,o,a=(new Date).getTime(),i=[],s=_();return s&&s.isDirty()&&!s.isHidden()&&r<a-3e3&&(s.save(),r=a),o={post_id:x("#post_ID").val()||0,post_type:x("#post_type").val()||"",post_author:x("#post_author").val()||"",post_title:x("#title").val()||"",content:x("#content").val()||"",excerpt:x("#excerpt").val()||""},"local"===t||(x('input[id^="in-category-"]:checked').each(function(){i.push(this.value)}),o.catslist=i.join(","),(e=x("#post_name").val())&&(o.post_name=e),(n=x("#parent_id").val())&&(o.parent_id=n),x("#comment_status").prop("checked")&&(o.comment_status="open"),x("#ping_status").prop("checked")&&(o.ping_status="open"),"1"===x("#auto_draft").val()&&(o.auto_draft="1")),o}function h(t){return"object"==typeof t?(t.post_title||"")+"::"+(t.content||"")+"::"+(t.excerpt||""):(x("#title").val()||"")+"::"+(x("#content").val()||"")+"::"+(x("#excerpt").val()||"")}function v(){w.trigger("autosave-disable-buttons"),setTimeout(f,5e3)}function f(){w.trigger("autosave-enable-buttons")}function _(){return"undefined"!=typeof tinymce&&tinymce.get("content")}return w.on("tinymce-editor-init.autosave",function(t,e){"content"===e.id&&b.setTimeout(function(){e.save(),g=h()},1e3)}).ready(function(){g=h()}),{getPostData:m,getCompareString:h,disableButtons:v,enableButtons:f,local:function y(){var o,c,a,u,i=!1;function s(){var t=!1;return a&&o&&(t=(t=sessionStorage.getItem("wp-autosave-"+o))?JSON.parse(t):{}),t}function p(){var t=s();return t&&c&&t["post_"+c]||!1}function l(t){var e=s();if(!e||!c)return!1;if(t)e["post_"+c]=t;else{if(!e.hasOwnProperty("post_"+c))return!1;delete e["post_"+c]}return function n(t){var e;return!(!a||!o)&&(e="wp-autosave-"+o,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e))}(e)}function r(t){var e,n,o;return!(i||!a)&&(t?(e=p()||{},x.extend(e,t)):e=m("local"),n=h(e),void 0===u&&(u=g),n!==u&&(e.save_time=(new Date).getTime(),e.status=x("#post_status").val()||"",(o=l(e))&&(u=n),o))}function v(t,e){function n(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return n(t||"")===n(e||"")}function t(){var t,e,n,o,a=p(),i=wpCookies.get("wp-saving-post"),s=x("#has-newer-autosave").parent(".notice"),r=x(".wp-header-end");if(i===c+"-saved")return wpCookies.remove("wp-saving-post"),void l(!1);a&&(t=x("#content").val()||"",e=x("#title").val()||"",n=x("#excerpt").val()||"",v(t,a.content)&&v(e,a.post_title)&&v(n,a.excerpt)||(r.length||(r=x(".wrap h1, .wrap h2").first()),o=x("#local-storage-notice").insertAfter(r).addClass("notice-warning"),s.length?s.slideUp(150,function(){o.slideDown(150)}):o.slideDown(200),o.find(".restore-backup").on("click.autosave-local",function(){!function n(t){var e;return!!t&&(u=h(t),x("#title").val()!==t.post_title&&x("#title").focus().val(t.post_title||""),x("#excerpt").val(t.excerpt||""),(e=_())&&!e.isHidden()&&"undefined"!=typeof switchEditors?(e.settings.wpautop&&t.content&&(t.content=switchEditors.wpautop(t.content)),e.undoManager.transact(function(){e.setContent(t.content||""),e.nodeChanged()})):(x("#content-html").click(),x("#content").focus(),document.execCommand("selectAll"),document.execCommand("insertText",!1,t.content||"")),!0)}(a),o.fadeTo(250,0,function(){o.slideUp(150)})})))}return o="undefined"!=typeof b.autosaveL10n&&b.autosaveL10n.blog_id,function f(){var t=Math.random().toString(),e=!1;try{b.sessionStorage.setItem("wp-test",t),e=b.sessionStorage.getItem("wp-test")===t,b.sessionStorage.removeItem("wp-test")}catch(n){}return a=e}()&&o&&(x("#content").length||x("#excerpt").length)&&w.ready(function e(){c=x("#post_ID").val()||0,x("#wp-content-wrap").hasClass("tmce-active")?w.on("tinymce-editor-init.autosave",function(){b.setTimeout(function(){t()},1500)}):t(),b.setInterval(r,15e3),x("form#post").on("submit.autosave-local",function(){var t=_(),e=x("#post_ID").val()||0;t&&!t.isHidden()?t.on("submit",function(){r({post_title:x("#title").val()||"",content:x("#content").val()||"",excerpt:x("#excerpt").val()||""})}):r({post_title:x("#title").val()||"",content:x("#content").val()||"",excerpt:x("#excerpt").val()||""});var n="https:"===b.location.protocol;wpCookies.set("wp-saving-post",e+"-check",86400,!1,!1,n)})}),{hasStorage:a,getSavedPostData:p,save:r,suspend:function n(){i=!0},resume:function d(){i=!1}}}(),server:function d(){var a,t,i,s,r=0,c=!1;function u(){a=!0,b.clearTimeout(t),t=b.setTimeout(function(){a=!1},1e4)}function o(){r=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}return w.on("heartbeat-send.autosave",function(t,e){var n=function o(){var t,e;return!(c||a||!b.autosave())&&!((new Date).getTime()<r)&&(e=h(t=m()),void 0===s&&(s=g),e!==s&&(i=e,u(),v(),w.trigger("wpcountwords",[t.content]).trigger("before-autosave",[t]),t._wpnonce=x("#_wpnonce").val()||"",t))}();n&&(e.wp_autosave=n)}).on("heartbeat-tick.autosave",function(t,e){e.wp_autosave&&function n(t){o(),a=!1,s=i,i="",w.trigger("after-autosave",[t]),f(),t.success&&x("#auto_draft").val("")}(e.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(t,e,n){if("timeout"===e||603===n){var o=x("#lost-connection-notice");wp.autosave.local.hasStorage||o.find(".hide-if-no-sessionstorage").hide(),o.show(),v()}}).on("heartbeat-connection-restored.autosave",function(){x("#lost-connection-notice").hide(),f()}).ready(function(){o()}),{tempBlockSave:u,triggerSave:function e(){r=0,wp.heartbeat.connectNow()},postChanged:function n(){return h()!==g},suspend:function p(){c=!0},resume:function l(){c=!1}}}()}}()}(jQuery,window);