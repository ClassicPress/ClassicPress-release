tinymce.PluginManager.add("wpautoresize",(function(e){var t=e.settings,o=300,n=!1;function i(e){return parseInt(e,10)||0}function a(s){var l,u,r,d,g,m,h,c,f,y,p,_,w=tinymce.DOM;n&&(u=e.getDoc())&&(s=s||{},r=u.body,d=u.documentElement,g=t.autoresize_min_height,!r||s&&"setcontent"===s.type&&s.initial||e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()?r&&d&&(r.style.overflowY="auto",d.style.overflowY="auto"):(h=e.dom.getStyle(r,"margin-top",!0),c=e.dom.getStyle(r,"margin-bottom",!0),f=e.dom.getStyle(r,"padding-top",!0),y=e.dom.getStyle(r,"padding-bottom",!0),p=e.dom.getStyle(r,"border-top-width",!0),_=e.dom.getStyle(r,"border-bottom-width",!0),(m=r.offsetHeight+i(h)+i(c)+i(f)+i(y)+i(p)+i(_))&&m<d.offsetHeight&&(m=d.offsetHeight),(isNaN(m)||m<=0)&&(m=tinymce.Env.ie?r.scrollHeight:tinymce.Env.webkit&&0===r.clientHeight?0:r.offsetHeight),m>t.autoresize_min_height&&(g=m),t.autoresize_max_height&&m>t.autoresize_max_height?(g=t.autoresize_max_height,r.style.overflowY="auto",d.style.overflowY="auto"):(r.style.overflowY="hidden",d.style.overflowY="hidden",r.scrollTop=0),g!==o&&(l=g-o,w.setStyle(e.iframeElement,"height",g+"px"),o=g,tinymce.isWebKit&&l<0&&a(s),e.fire("wp-autoresize",{height:g,deltaHeight:"nodechange"===s.type?l:null}))))}function s(e,t,o){setTimeout((function(){a(),e--?s(e,t,o):o&&o()}),t)}e.settings.inline||tinymce.Env.iOS||(t.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),t.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),t.wp_autoresize_on&&(n=!0,e.on("init",(function(){e.dom.addClass(e.getBody(),"wp-autoresize")})),e.on("nodechange keyup FullscreenStateChanged",a),e.on("setcontent",(function(){s(3,100)})),e.getParam("autoresize_on_init",!0)&&e.on("init",(function(){s(10,200,(function(){s(5,1e3)}))}))),e.on("show",(function(){o=0})),e.addCommand("wpAutoResize",a),e.addCommand("wpAutoResizeOn",(function(){e.dom.hasClass(e.getBody(),"wp-autoresize")||(n=!0,e.dom.addClass(e.getBody(),"wp-autoresize"),e.on("nodechange setcontent keyup FullscreenStateChanged",a),a())})),e.addCommand("wpAutoResizeOff",(function(){var i;t.wp_autoresize_on||(n=!1,i=e.getDoc(),e.dom.removeClass(e.getBody(),"wp-autoresize"),e.off("nodechange setcontent keyup FullscreenStateChanged",a),i.body.style.overflowY="auto",i.documentElement.style.overflowY="auto",o=0)})))}));