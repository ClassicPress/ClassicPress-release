!function(e){e.PluginManager.add("wpemoji",(function(t){var o,n,i=window.wp,a=window._wpemojiSettings,w=e.Env,d=window.navigator.userAgent,c=d.indexOf("Windows")>-1,m=!!((n=d.match(/Windows NT 6\.(\d)/))&&n[1]>1);function s(e){i.emoji.parse(e,{imgAttr:{"data-mce-resize":"false","data-mce-placeholder":"1","data-wp-emoji":"1"}})}function r(e){var o,n;e&&window.twemoji&&window.twemoji.test(e.textContent||e.innerText)&&(w.webkit&&(n=(o=t.selection).getBookmark()),s(e),w.webkit&&o.moveToBookmark(n))}i&&i.emoji&&!a.supports.everything&&(m?t.on("keyup",(function(e){231===e.keyCode&&r(t.selection.getNode())})):c||(t.on("keydown keyup",(function(e){o="keydown"===e.type})),t.on("input",(function(){o||r(t.selection.getNode())}))),t.on("setcontent",(function(e){var o=t.selection,n=o.getNode();window.twemoji&&window.twemoji.test(n.textContent||n.innerText)&&(s(n),w.ie&&w.ie<9&&e.load&&n&&"BODY"===n.nodeName&&o.collapse(!0))})),t.on("PastePostProcess",(function(o){window.twemoji&&e.each(t.dom.$("img.emoji",o.node),(function(e){e.alt&&window.twemoji.test(e.alt)&&function(e){e.className="emoji",e.setAttribute("data-mce-resize","false"),e.setAttribute("data-mce-placeholder","1"),e.setAttribute("data-wp-emoji","1")}(e)}))})),t.on("postprocess",(function(e){e.content&&(e.content=e.content.replace(/<img[^>]+data-wp-emoji="[^>]+>/g,(function(e){var t=e.match(/alt="([^"]+)"/);return t&&t[1]?t[1]:e})))})),t.on("resolvename",(function(e){"IMG"===e.target.nodeName&&t.dom.getAttrib(e.target,"data-wp-emoji")&&e.preventDefault()})))}))}(window.tinymce);