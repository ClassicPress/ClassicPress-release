!function(e){var t,n={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"};t={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:"#ffff33",delColor:"#faafaa",dimAddColor:"#ffff33",dimDelColor:"#ff3333",confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(t,n){var i=wpAjax.unserialize(t.attr("href")),o=e("#"+n.element);return n.nonce||i._ajax_nonce||o.find('input[name="_ajax_nonce"]').val()||i._wpnonce||o.find('input[name="_wpnonce"]').val()||0},parseData:function(t,n){var i,o=[];try{(i=(i=e(t).data("wp-lists")||"").match(new RegExp(n+":[\\S]+")))&&(o=i[0].split(":"))}catch(s){}return o},pre:function(t,n,i){var o,s,a;return n=e.extend({},this.wpList.settings,{element:null,nonce:0,target:t.get(0)},n||{}),!(e.isFunction(n.confirm)&&(o=e("#"+n.element),"add"!==i&&(s=o.css("backgroundColor"),o.css("backgroundColor","#ff9966")),a=n.confirm.call(this,t,n,i,s),"add"!==i&&o.css("backgroundColor",s),!a))&&n},ajaxAdd:function(n,i){var o,s,a,l,r=this,d=e(n),c=t.parseData(d,"add");return i=i||{},(i=t.pre.call(r,d,i,"add")).element=c[2]||d.prop("id")||i.element||null,i.addColor=c[3]?"#"+c[3]:i.addColor,!!i&&(d.is('[id="'+i.element+'-submit"]')?!i.element||(i.action="add-"+i.what,i.nonce=t.nonce(d,i),!!wpAjax.validateForm("#"+i.element)&&(i.data=e.param(e.extend({_ajax_nonce:i.nonce,action:i.action},wpAjax.unserialize(c[4]||""))),o=e("#"+i.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]'),(s=e.isFunction(o.fieldSerialize)?o.fieldSerialize():o.serialize())&&(i.data+="&"+s),!(!e.isFunction(i.addBefore)||(i=i.addBefore(i)))||(!i.data.match(/_ajax_nonce=[a-f0-9]+/)||(i.success=function(n){return a=wpAjax.parseAjaxResponse(n,i.response,i.element),l=n,!(!a||a.errors)&&(!0===a||(e.each(a.responses,(function(){t.add.call(r,this.data,e.extend({},i,{position:this.position||0,id:this.id||0,oldId:this.oldId||null}))})),r.wpList.recolor(),e(r).trigger("wpListAddEnd",[i,r.wpList]),void t.clear.call(r,"#"+i.element)))},i.complete=function(t,n){e.isFunction(i.addAfter)&&i.addAfter(l,e.extend({xml:t,status:n,parsed:a},i))},e.ajax(i),!1)))):!t.add.call(r,d,i))},ajaxDel:function(n,i){var o,s,a,l=this,r=e(n),d=t.parseData(r,"delete");return i=i||{},(i=t.pre.call(l,r,i,"delete")).element=d[2]||i.element||null,i.delColor=d[3]?"#"+d[3]:i.delColor,!(!i||!i.element)&&(i.action="delete-"+i.what,i.nonce=t.nonce(r,i),i.data=e.extend({_ajax_nonce:i.nonce,action:i.action,id:i.element.split("-").pop()},wpAjax.unserialize(d[4]||"")),!(!e.isFunction(i.delBefore)||(i=i.delBefore(i,l)))||(!i.data._ajax_nonce||(o=e("#"+i.element),"none"!==i.delColor?o.css("backgroundColor",i.delColor).fadeOut(350,(function(){l.wpList.recolor(),e(l).trigger("wpListDelEnd",[i,l.wpList])})):(l.wpList.recolor(),e(l).trigger("wpListDelEnd",[i,l.wpList])),i.success=function(t){if(s=wpAjax.parseAjaxResponse(t,i.response,i.element),a=t,!s||s.errors)return o.stop().stop().css("backgroundColor","#faa").show().queue((function(){l.wpList.recolor(),e(this).dequeue()})),!1},i.complete=function(t,n){e.isFunction(i.delAfter)&&o.queue((function(){i.delAfter(a,e.extend({xml:t,status:n,parsed:s},i))})).dequeue()},e.ajax(i),!1)))},ajaxDim:function(n,i){var o,s,a,l,r,d,c=this,u=e(n),p=t.parseData(u,"dim");return"none"!==u.parent().css("display")&&(i=i||{},(i=t.pre.call(c,u,i,"dim")).element=p[2]||i.element||null,i.dimClass=p[3]||i.dimClass||null,i.dimAddColor=p[4]?"#"+p[4]:i.dimAddColor,i.dimDelColor=p[5]?"#"+p[5]:i.dimDelColor,!(i&&i.element&&i.dimClass)||(i.action="dim-"+i.what,i.nonce=t.nonce(u,i),i.data=e.extend({_ajax_nonce:i.nonce,action:i.action,id:i.element.split("-").pop(),dimClass:i.dimClass},wpAjax.unserialize(p[6]||"")),!(!e.isFunction(i.dimBefore)||(i=i.dimBefore(i)))||(o=e("#"+i.element),s=o.toggleClass(i.dimClass).is("."+i.dimClass),a=t.getColor(o),l=s?i.dimAddColor:i.dimDelColor,o.toggleClass(i.dimClass),"none"!==l?o.animate({backgroundColor:l},"fast").queue((function(){o.toggleClass(i.dimClass),e(this).dequeue()})).animate({backgroundColor:a},{complete:function(){e(this).css("backgroundColor",""),e(c).trigger("wpListDimEnd",[i,c.wpList])}}):e(c).trigger("wpListDimEnd",[i,c.wpList]),!i.data._ajax_nonce||(i.success=function(t){if(r=wpAjax.parseAjaxResponse(t,i.response,i.element),d=t,!0===r)return!0;if(!r||r.errors)return o.stop().stop().css("backgroundColor","#ff3333")[s?"removeClass":"addClass"](i.dimClass).show().queue((function(){c.wpList.recolor(),e(this).dequeue()})),!1;if("undefined"!=typeof r.responses[0].supplemental.comment_link){var n=u.find(".submitted-on"),a=n.find("a");""!==r.responses[0].supplemental.comment_link?n.html(e("<a></a>").text(n.text()).prop("href",r.responses[0].supplemental.comment_link)):a.length&&n.text(a.text())}},i.complete=function(t,n){e.isFunction(i.dimAfter)&&o.queue((function(){i.dimAfter(d,e.extend({xml:t,status:n,parsed:r},i))})).dequeue()},e.ajax(i),!1))))},getColor:function(t){return e(t).css("backgroundColor")||"#ffffff"},add:function(n,i){var o,s,a=e(this),l=e(n),r=!1;return"string"==typeof i&&(i={what:i}),i=e.extend({position:0,id:0,oldId:null},this.wpList.settings,i),!(!l.length||!i.what)&&(i.oldId&&(r=e("#"+i.what+"-"+i.oldId)),!i.id||i.id===i.oldId&&r&&r.length||e("#"+i.what+"-"+i.id).remove(),r&&r.length?(r.before(l),r.remove()):isNaN(i.position)?(o="after","-"===i.position.substr(0,1)&&(i.position=i.position.substr(1),o="before"),1===(s=a.find("#"+i.position)).length?s[o](l):a.append(l)):"comment"===i.what&&0!==e("#"+i.element).length||(i.position<0?a.prepend(l):a.append(l)),i.alt&&l.toggleClass(i.alt,(a.children(":visible").index(l[0])+i.altOffset)%2),"none"!==i.addColor&&l.css("backgroundColor",i.addColor).animate({backgroundColor:t.getColor(l)},{complete:function(){e(this).css("backgroundColor","")}}),a.each((function(e,t){t.wpList.process(l)})),l)},clear:function(t){var n,i,o=e(t);this.wpList&&o.parents("#"+this.id).length||o.find(":input").each((function(t,o){e(o).parents(".form-no-clear").length||(n=o.type.toLowerCase(),i=o.tagName.toLowerCase(),"text"===n||"password"===n||"textarea"===i?o.value="":"checkbox"===n||"radio"===n?o.checked=!1:"select"===i&&(o.selectedIndex=null))}))},process:function(t){var n=this,i=e(t||document);i.on("submit",'form[data-wp-lists^="add:'+n.id+':"]',(function(){return n.wpList.add(this)})),i.on("click",'a[data-wp-lists^="add:'+n.id+':"], input[data-wp-lists^="add:'+n.id+':"]',(function(){return n.wpList.add(this)})),i.on("click",'[data-wp-lists^="delete:'+n.id+':"]',(function(){return n.wpList.del(this)})),i.on("click",'[data-wp-lists^="dim:'+n.id+':"]',(function(){return n.wpList.dim(this)}))},recolor:function(){var t,n=this,i=[":even",":odd"];n.wpList.settings.alt&&((t=e(".list-item:visible",n)).length||(t=e(n).children(":visible")),n.wpList.settings.altOffset%2&&i.reverse(),t.filter(i[0]).addClass(n.wpList.settings.alt).end(),t.filter(i[1]).removeClass(n.wpList.settings.alt))},init:function(){var e=this;e.wpList.process=function(t){e.each((function(){this.wpList.process(t)}))},e.wpList.recolor=function(){e.each((function(){this.wpList.recolor()}))}}},e.fn.wpList=function(i){return this.each((function(o,s){s.wpList={settings:e.extend({},t.settings,{what:t.parseData(s,"list")[1]||""},i)},e.each(n,(function(e,n){s.wpList[e]=function(e,i){return t[n].call(s,e,i)}}))})),t.init.call(this),this.wpList.process(),this}}(jQuery);