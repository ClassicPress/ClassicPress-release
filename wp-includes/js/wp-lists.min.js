!function(e){var t,n={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"};t={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:"#ffff33",delColor:"#faafaa",dimAddColor:"#ffff33",dimDelColor:"#ff3333",confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(t,n){var o=wpAjax.unserialize(t.attr("href")),i=e("#"+n.element);return n.nonce||o._ajax_nonce||i.find('input[name="_ajax_nonce"]').val()||o._wpnonce||i.find('input[name="_wpnonce"]').val()||0},parseData:function(t,n){var o,i=[];try{(o=(o=e(t).data("wp-lists")||"").match(new RegExp(n+":[\\S]+")))&&(i=o[0].split(":"))}catch(a){}return i},pre:function(t,n,o){var i,a,s;return!("function"==typeof(n=e.extend({},this.wpList.settings,{element:null,nonce:0,target:t.get(0)},n||{})).confirm&&(i=e("#"+n.element),"add"!==o&&(a=i.css("backgroundColor"),i.css("backgroundColor","#ff9966")),s=n.confirm.call(this,t,n,o,a),"add"!==o&&i.css("backgroundColor",a),!s))&&n},ajaxAdd:function(n,o){var i,a,s,l,r=this,d=e(n),c=t.parseData(d,"add");return o=o||{},(o=t.pre.call(r,d,o,"add")).element=c[2]||d.prop("id")||o.element||null,o.addColor=c[3]?"#"+c[3]:o.addColor,!!o&&(d.is('[id="'+o.element+'-submit"]')?!o.element||(o.action="add-"+o.what,o.nonce=t.nonce(d,o),!!wpAjax.validateForm("#"+o.element)&&(o.data=e.param(e.extend({_ajax_nonce:o.nonce,action:o.action},wpAjax.unserialize(c[4]||""))),(a="function"==typeof(i=e("#"+o.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]')).fieldSerialize?i.fieldSerialize():i.serialize())&&(o.data+="&"+a),"function"==typeof o.addBefore&&!(o=o.addBefore(o))||(!o.data.match(/_ajax_nonce=[a-f0-9]+/)||(o.success=function(n){return s=wpAjax.parseAjaxResponse(n,o.response,o.element),l=n,!(!s||s.errors)&&(!0===s||(e.each(s.responses,(function(){t.add.call(r,this.data,e.extend({},o,{position:this.position||0,id:this.id||0,oldId:this.oldId||null}))})),r.wpList.recolor(),e(r).trigger("wpListAddEnd",[o,r.wpList]),void t.clear.call(r,"#"+o.element)))},o.complete=function(t,n){"function"==typeof o.addAfter&&o.addAfter(l,e.extend({xml:t,status:n,parsed:s},o))},e.ajax(o),!1)))):!t.add.call(r,d,o))},ajaxDel:function(n,o){var i,a,s,l=this,r=e(n),d=t.parseData(r,"delete");return o=o||{},(o=t.pre.call(l,r,o,"delete")).element=d[2]||o.element||null,o.delColor=d[3]?"#"+d[3]:o.delColor,!(!o||!o.element)&&(o.action="delete-"+o.what,o.nonce=t.nonce(r,o),o.data=e.extend({_ajax_nonce:o.nonce,action:o.action,id:o.element.split("-").pop()},wpAjax.unserialize(d[4]||"")),"function"==typeof o.delBefore&&!(o=o.delBefore(o,l))||(!o.data._ajax_nonce||(i=e("#"+o.element),"none"!==o.delColor?i.css("backgroundColor",o.delColor).fadeOut(350,(function(){l.wpList.recolor(),e(l).trigger("wpListDelEnd",[o,l.wpList])})):(l.wpList.recolor(),e(l).trigger("wpListDelEnd",[o,l.wpList])),o.success=function(t){if(a=wpAjax.parseAjaxResponse(t,o.response,o.element),s=t,!a||a.errors)return i.stop().stop().css("backgroundColor","#faa").show().queue((function(){l.wpList.recolor(),e(this).dequeue()})),!1},o.complete=function(t,n){"function"==typeof o.delAfter&&i.queue((function(){o.delAfter(s,e.extend({xml:t,status:n,parsed:a},o))})).dequeue()},e.ajax(o),!1)))},ajaxDim:function(n,o){var i,a,s,l,r,d,c=this,p=e(n),u=t.parseData(p,"dim");return"none"!==p.parent().css("display")&&(o=o||{},(o=t.pre.call(c,p,o,"dim")).element=u[2]||o.element||null,o.dimClass=u[3]||o.dimClass||null,o.dimAddColor=u[4]?"#"+u[4]:o.dimAddColor,o.dimDelColor=u[5]?"#"+u[5]:o.dimDelColor,!(o&&o.element&&o.dimClass)||(o.action="dim-"+o.what,o.nonce=t.nonce(p,o),o.data=e.extend({_ajax_nonce:o.nonce,action:o.action,id:o.element.split("-").pop(),dimClass:o.dimClass},wpAjax.unserialize(u[6]||"")),"function"==typeof o.dimBefore&&!(o=o.dimBefore(o))||(i=e("#"+o.element),a=i.toggleClass(o.dimClass).is("."+o.dimClass),s=t.getColor(i),l=a?o.dimAddColor:o.dimDelColor,i.toggleClass(o.dimClass),"none"!==l?i.animate({backgroundColor:l},"fast").queue((function(){i.toggleClass(o.dimClass),e(this).dequeue()})).animate({backgroundColor:s},{complete:function(){e(this).css("backgroundColor",""),e(c).trigger("wpListDimEnd",[o,c.wpList])}}):e(c).trigger("wpListDimEnd",[o,c.wpList]),!o.data._ajax_nonce||(o.success=function(t){if(r=wpAjax.parseAjaxResponse(t,o.response,o.element),d=t,!0===r)return!0;if(!r||r.errors)return i.stop().stop().css("backgroundColor","#ff3333")[a?"removeClass":"addClass"](o.dimClass).show().queue((function(){c.wpList.recolor(),e(this).dequeue()})),!1;if("undefined"!=typeof r.responses[0].supplemental.comment_link){var n=p.find(".submitted-on"),s=n.find("a");""!==r.responses[0].supplemental.comment_link?n.html(e("<a></a>").text(n.text()).prop("href",r.responses[0].supplemental.comment_link)):s.length&&n.text(s.text())}},o.complete=function(t,n){"function"==typeof o.dimAfter&&i.queue((function(){o.dimAfter(d,e.extend({xml:t,status:n,parsed:r},o))})).dequeue()},e.ajax(o),!1))))},getColor:function(t){return e(t).css("backgroundColor")||"#ffffff"},add:function(n,o){var i,a,s=e(this),l=e(n),r=!1;return"string"==typeof o&&(o={what:o}),o=e.extend({position:0,id:0,oldId:null},this.wpList.settings,o),!(!l.length||!o.what)&&(o.oldId&&(r=e("#"+o.what+"-"+o.oldId)),!o.id||o.id===o.oldId&&r&&r.length||e("#"+o.what+"-"+o.id).remove(),r&&r.length?(r.before(l),r.remove()):isNaN(o.position)?(i="after","-"===o.position.substr(0,1)&&(o.position=o.position.substr(1),i="before"),1===(a=s.find("#"+o.position)).length?a[i](l):s.append(l)):"comment"===o.what&&0!==e("#"+o.element).length||(o.position<0?s.prepend(l):s.append(l)),o.alt&&l.toggleClass(o.alt,(s.children(":visible").index(l[0])+o.altOffset)%2),"none"!==o.addColor&&l.css("backgroundColor",o.addColor).animate({backgroundColor:t.getColor(l)},{complete:function(){e(this).css("backgroundColor","")}}),s.each((function(e,t){t.wpList.process(l)})),l)},clear:function(t){var n,o,i=e(t);this.wpList&&i.parents("#"+this.id).length||i.find(":input").each((function(t,i){e(i).parents(".form-no-clear").length||(n=i.type.toLowerCase(),o=i.tagName.toLowerCase(),"text"===n||"password"===n||"textarea"===o?i.value="":"checkbox"===n||"radio"===n?i.checked=!1:"select"===o&&(i.selectedIndex=null))}))},process:function(t){var n=this,o=e(t||document);o.on("submit",'form[data-wp-lists^="add:'+n.id+':"]',(function(){return n.wpList.add(this)})),o.on("click",'a[data-wp-lists^="add:'+n.id+':"], input[data-wp-lists^="add:'+n.id+':"]',(function(){return n.wpList.add(this)})),o.on("click",'[data-wp-lists^="delete:'+n.id+':"]',(function(){return n.wpList.del(this)})),o.on("click",'[data-wp-lists^="dim:'+n.id+':"]',(function(){return n.wpList.dim(this)}))},recolor:function(){var t,n=this,o=[":even",":odd"];n.wpList.settings.alt&&((t=e(".list-item:visible",n)).length||(t=e(n).children(":visible")),n.wpList.settings.altOffset%2&&o.reverse(),t.filter(o[0]).addClass(n.wpList.settings.alt).end(),t.filter(o[1]).removeClass(n.wpList.settings.alt))},init:function(){var e=this;e.wpList.process=function(t){e.each((function(){this.wpList.process(t)}))},e.wpList.recolor=function(){e.each((function(){this.wpList.recolor()}))}}},e.fn.wpList=function(o){return this.each((function(i,a){a.wpList={settings:e.extend({},t.settings,{what:t.parseData(a,"list")[1]||""},o)},e.each(n,(function(e,n){a.wpList[e]=function(e,o){return t[n].call(a,e,o)}}))})),t.init.call(this),this.wpList.process(),this}}(jQuery);